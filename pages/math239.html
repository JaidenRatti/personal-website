<!DOCTYPE html> 
<html lang='en-US' xml:lang='en-US'> 
<head><title></title> 
<meta charset='utf-8' /> 
<meta content='TeX4ht (https://tug.org/tex4ht/)' name='generator' /> 
<meta content='width=device-width,initial-scale=1' name='viewport' /> 
<link href='Math239.css' rel='stylesheet' type='text/css' /> 
<link rel="stylesheet"  href="https://latex.now.sh/style.min.css" /> 
<link rel="stylesheet" href="Home.module.css"/> 
<meta content='Math239.tex' name='src' /> 
<style>
     body {
       display: flex;
       line-height: 1.4;
       font-weight: dark;
       max-width:800px;
       margin: 0 auto;
     }
     .underline {
       text-decoration: underline;
     }
   </style>
<script>window.MathJax = { tex: { tags: "ams", }, }; </script> 
 <script async='async' id='MathJax-script' src='https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js' type='text/javascript'></script>  
</head><body>
<!-- l. 34 --><p class='noindent'>
                                                                                      
                                                                                      
</p>
<div class='center'>
<!-- l. 35 --><p class='noindent'>
</p><!-- l. 36 --><p class='noindent'>_________________________________________________________<br />
<span class='ec-lmbx-12x-x-172'>MATH239: Introduction To Combinatorics</span><br />
<span class='ec-lmcsc-10x-x-144'>Part 1: Enumerative Combinatorics</span><br />
<span class='ec-lmcsc-10x-x-144'>Prof. <a href="https://uwaterloo.ca/scholar/kghare/bio" target="_blank">Kevin Hare</a></span><br />
<span class='ec-lmcsc-10x-x-144'>1241</span><br />
<span class="ec-lmr-12x-x-120"><mark>Refresh to render \(LaTeX\)</mark></span>
</p>
</div>
                                                                                      
                                                                                      
<h3 class='likesectionHead' id='contents'><a id='x1-1000'></a>Contents</h3>
<div class='tableofcontents'>
<span class='sectionToc'>1 <a href='#basic-principles' id='QQ2-1-2'>Basic Principles</a></span>
<br /> <span class='subsectionToc'>1.1 <a href='#combinatorics' id='QQ2-1-3'>Combinatorics</a></span>
<br /> <span class='subsectionToc'>1.2 <a href='#meaning-vs-algebra' id='QQ2-1-4'>Meaning vs Algebra</a></span>
<br /> <span class='subsectionToc'>1.3 <a href='#bijections' id='QQ2-1-5'>Bijections</a></span>
<br /><span class='sectionToc'>2 <a href='#generating-series' id='QQ2-1-6'>Generating Series</a></span>
<br /> <span class='subsectionToc'>2.1 <a href='#formal-power-series' id='QQ2-1-7'>Formal Power Series</a></span>
<br /> <span class='subsectionToc'>2.2 <a href='#generating-series1' id='QQ2-1-8'>Generating Series</a></span>
<br /> <span class='subsectionToc'>2.3 <a href='#sum-lemma' id='QQ2-1-9'>Sum Lemma</a></span>
<br /> <span class='subsectionToc'>2.4 <a href='#product-lemma' id='QQ2-1-10'>Product Lemma</a></span>
<br /> <span class='subsectionToc'>2.5 <a href='#infinite-sum-lemma' id='QQ2-1-11'>Infinite Sum Lemma</a></span>
<br /> <span class='subsectionToc'>2.6 <a href='#compositions' id='QQ2-1-12'>Compositions</a></span>
<br /><span class='sectionToc'>3 <a href='#binary-strings' id='QQ2-1-13'>Binary Strings</a></span>
<br /> <span class='subsectionToc'>3.1 <a href='#regular-expressions-rational-languages' id='QQ2-1-14'>Regular Expressions &amp; Rational Languages</a></span>
<br /> <span class='subsectionToc'>3.2 <a href='#ambiguous-vs-unambiguous' id='QQ2-1-15'>Ambiguous vs Unambiguous</a></span>
<br /> <span class='subsectionToc'>3.3 <a href='#block-prefix-decomposition' id='QQ2-1-16'>Block &amp; Prefix Decomposition</a></span>
<br /> <span class='subsectionToc'>3.4 <a href='#recursive-decomposition' id='QQ2-1-17'>Recursive Decomposition</a></span>
<br /> <span class='subsectionToc'>3.5 <a href='#excluded-substrings' id='QQ2-1-18'>Excluded Substrings</a></span>
<br /><span class='sectionToc'>4 <a href='#recurrence-relations' id='QQ2-1-19'>Recurrence Relations</a></span>
<br /> <span class='subsectionToc'>4.1 <a href='#recurrences' id='QQ2-1-20'>Recurrences</a></span>
<br /> <span class='subsectionToc'>4.2 <a href='#homogeneous-linear-recurrence-relations' id='QQ2-1-21'>Homogeneous Linear Recurrence Relations</a></span>
</div>
                                                                                      
                                                                                      
<!-- l. 55 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='basic-principles'><span class='titlemark'>1   </span> <a id='x1-20001'></a>Basic Principles</h3>
<!-- l. 57 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='combinatorics'><span class='titlemark'>1.1   </span> <a id='x1-30001.1'></a>Combinatorics</h4>
<!-- l. 59 --><p class='noindent'>The study of combinatorics is the study of counting things.
</p><!-- l. 61 --><p class='noindent'>
     </p><ol class='enumerate1'>
<li class='enumerate' id='x1-3002x1'>How many possible poker hands are there?
     </li>
<li class='enumerate' id='x1-3004x2'>How many ways can we choose a 3 topping pizza with 10 toppings?
     </li>
<li class='enumerate' id='x1-3006x3'>How many ways can we split 8 slices of pizza between 3 people?
     </li>
<li class='enumerate' id='x1-3008x4'>How many ways can we make change for a dollar?</li></ol>
<!-- l. 68 --><p class='noindent'><span class='underline'>Notation</span>
</p><!-- l. 70 --><p class='noindent'>\(A = \{a_1, a_2, ..., a_n\}\) is an n-element set. </p>
     <ul class='itemize1'>
     <li class='itemize'>All terms are different
     </li>
     <li class='itemize'>Order of terms does not matter, \(\{1,2\} = \{2,1\}\)</li></ul>
<!-- l. 76 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 78 --><p class='noindent'>Let \(A\) be the set of primes less than 10, \(A = \{2,3,5,7\}\).
</p><!-- l. 80 --><p class='noindent'>Let \(B\) be the set of odd numbers less than 10, \(B = \{1,3,5,7,9\}\).
</p><!-- l. 82 --><p class='noindent'>We denote the size of a set by \(|A|\).
</p><!-- l. 84 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 86 --><p class='noindent'>From above, \(|A|= 4\), \(|B| = 5\).
</p><!-- l. 88 --><p class='noindent'><span class='underline'>Example</span>
                                                                                      
                                                                                      
</p><!-- l. 90 --><p class='noindent'>Choose a prime less than 10 <span class='underline'>and</span> an odd number less than 10. I.e. \((2,1),(2,3),...,(7,9)\).
</p><!-- l. 92 --><p class='noindent'>For this, we use the notation of \(A \times B = \{(a,b): a \in A, b \in B\}\)
</p><!-- l. 94 --><p class='noindent'>We have \(|A \times B| = |A| \cdot |B|\)
</p><!-- l. 96 --><p class='noindent'>In this case, \((A \times B) = 4 \cdot 5 = 20\)
</p><!-- l. 98 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 100 --><p class='noindent'>Choose a prime less than 10 <span class='underline'>or</span> choose an odd number less than 10.
</p><!-- l. 102 --><p class='noindent'>Choices are 1,2,3,5,7,9. This is denoted by \(A \cup B = \{x: x \in A\) or \(x \in B \}\) (or \(x\) is in both).
</p><!-- l. 104 --><p class='noindent'>\(|A \cup B| = 6\)
</p><!-- l. 106 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 108 --><p class='noindent'>Choose a number less than 10 that is prime and an odd number \(\{3,5,7\}\)
</p><!-- l. 110 --><p class='noindent'>We denote this by \(A \cap B = \{x: x \in A\) and \(x \in B\}\)
</p><!-- l. 112 --><p class='noindent'><span class='underline'>Fact</span> \(|A \cup B| = |A| + |B| - |A \cap B|\)
</p><!-- l. 114 --><p class='noindent'><span class='underline'>Definition</span> Let A be a set. We define a list of A as the set of elements of A where the order matters
</p><!-- l. 116 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 118 --><p class='noindent'>Let \(A = \{2,3,5,7\}\) be the set of primes less than 10.
</p><!-- l. 120 --><p class='noindent'>The possible lists of A include
</p><!-- l. 122 --><p class='noindent'>(2,3,5,7)(3,2,5,7)(5,2,3,7)(7,2,3,5)(2,3,7,5)(2,5,3,7)(2,5,7,3)(2,7,5,3)(2,7,3,5)\(\ldots \)(3,7,2,5) (5,7,3,2)(7,5,3,2)
</p><!-- l. 124 --><p class='noindent'>In this case there are 24 lists of \(A = \{2,3,5,7\}\)
</p><!-- l. 126 --><p class='noindent'>Note, all elements in A will occur exactly once in each list. That is, lists are length \(|A|\).
</p><!-- l. 128 --><p class='noindent'><span class='underline'>Question</span>: Let A be a set with \(|A| = n\). How many lists of A are there?
</p><!-- l. 130 --><p class='noindent'>Let \(p_n\) be the number of lists of \(A\) where \(|A| = n\). We can partition the set of lists based upon the first element of the
list.
</p><!-- l. 132 --><p class='noindent'>There are \(n\) choices for this first element. Let \(x \in A\) be the first element of a list. The remainder of the list will be
chosen from the list of \(A \setminus \{x\}\).
</p><!-- l. 134 --><p class='noindent'>Note that \(|A \setminus \{x\} | = n - 1\)
</p><!-- l. 136 --><p class='noindent'>Hence there are \(p_{n-1}\) choices for the last \(n-1\) elements of the list. As there were \(n\) choices for \(x\), we get \(p_n = n \cdot p_{n-1}\).
</p><!-- l. 138 --><p class='noindent'>Note \(p_1 = 1\) (the only list from \(\{x\}\) is \((x)\)).
</p><!-- l. 140 --><p class='noindent'>Hence \(p_n = n \cdot p_{n-1} = n \cdot (n-1) \cdot p_{n-2} \ldots = n(n-1) \ldots (2)p_1 = n!\)
</p><!-- l. 142 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 144 --><p class='noindent'>Let \(A\) be a set with \(|A| = n\). Then the number of lists of \(A\) is \(n!\)
</p><!-- l. 146 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 148 --><p class='noindent'>A subset of a set is a collection of elements from \(A\) without repetition. Note a subset may be empty, or all of \(A\).
Order does not matter.
</p><!-- l. 150 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 152 --><p class='noindent'>Let \(A = \{2,3,5,7\}\). The set of all subsets includes
</p><!-- l. 154 --><p class='noindent'>\(\{\}, \{2\}, \{3\}, \{5\}, \{7\}, \{2,3\}, \{2,5\}, \{2,7\}... 16\)
</p><!-- l. 156 --><p class='noindent'>We see that for each \(x \in A\) a subset either contains \(x\), or doesn’t contain \(x\). This gives us two choices for all \(x \in A\). Either it is
in the subset or it is not.
</p><!-- l. 158 --><p class='noindent'>This allows us to observe that the number of subsets of \(A\) where \(|A| = n\), is \(2^n\).
</p><!-- l. 160 --><p class='noindent'><span class='underline'>Theorem</span>
                                                                                      
                                                                                      
</p><!-- l. 162 --><p class='noindent'>The number of subsets of \(A\) with \(|A| = n\), is \(2^n\) (include or not; 2 options \(n\) times).
</p><!-- l. 164 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 166 --><p class='noindent'>Let \(A\) be a set of size \(n\). A partial list of size \(k\) is an ordered list \((a_1, a_2, \ldots , a_k)\) with \(a_i \in A\) and no repeats.
</p><!-- l. 168 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 170 --><p class='noindent'>Let \(A = \{2,3,5,7\}\). Let \(k = 2\). The partial lists of length \(2\) of \(A\) are
</p><!-- l. 172 --><p class='noindent'>(2,3),(3,2),(2,5),(5,2)
</p><!-- l. 174 --><p class='noindent'>(2,7),(7,2),(3,5),(5,3)
</p><!-- l. 176 --><p class='noindent'>(3,7),(7,3),(5,7),(7,5)
</p><!-- l. 178 --><p class='noindent'><span class='underline'>Question</span>
</p><!-- l. 180 --><p class='noindent'>For every \(n\) and \(k\), how many partial lists of length \(k\) are there of \(\{1,2,\ldots ,n\}\)
</p><!-- l. 182 --><p class='noindent'><span class='underline'>Notice</span>
</p><!-- l. 184 --><p class='noindent'>In the previous example, there are \(4\) choices for the first element of the list. After we have chosen the first
element, we have only 3 choices for the second. After, we are done.
</p><!-- l. 186 --><p class='noindent'>This gives us the number of partial lists is \(4 \cdot 3 = 12\)
</p><!-- l. 188 --><p class='noindent'>In general, for \(|A| = n\), and \(k \le n\), we have
</p><!-- l. 190 --><p class='noindent'>
     </p><ol class='enumerate1'>
<li class='enumerate' id='x1-3010x1'>\(n\) choices or the first element
     </li>
<li class='enumerate' id='x1-3012x2'>\(n-1\) choices or the second</li></ol>
<!-- l. 195 --><p class='noindent'>k. \(n-k-1\) choices for the \(k^{th}\) element
</p><!-- l. 198 --><p class='noindent'><span class='underline'>this gives</span>
</p><!-- l. 200 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 202 --><p class='noindent'>The number of partial lists of length \(k\) of \(\{1,2,\ldots ,n\}\) is
</p><!-- l. 208 --><p class='noindent'>\begin {equation*}  n(n-1)(n-2)...(n-k+1) = \frac {n(n-1)(n-2)...(n-k+1)(n-k)...(2)(1)}{(n-k)(n-k-1)..(2)(1)} = \frac {n!}{(n-k)!}  \end {equation*}
</p><!-- l. 210 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 212 --><p class='noindent'>Find all of the subsets of size \(2\) of \(\{2,3,5,7\}\)
</p><!-- l. 214 --><p class='noindent'>\(\{2,3\},\{2,5\},\{2,7\},\{3,5\},\{3,7\},\{5,7\}\)
</p><!-- l. 216 --><p class='noindent'>For every subset of length \(k\) there are \(k!\) orderings of the elements to get a partial list of length \(k\). This is true for
every subset.
</p><!-- l. 218 --><p class='noindent'>This gives us that
</p><!-- l. 220 --><p class='noindent'>(# of subsets of size \(k\) of \(\{1,2,\ldots ,n\}\)) \( \cdot k! =\) # of partial lists of length \(k\) of \(\{1,2,\ldots ,n\}\)
</p><!-- l. 222 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 224 --><p class='noindent'>Let \(A\) be a set \(|A| = n\), and \(k \le n\). Then the number of subsets of subsets of size \(k\) is
</p><!-- l. 230 --><p class='noindent'>\begin {equation*}  \frac {n!}{(n-k)!k!} = \binom {n}{k} =\frac {\text {number of partial lists}}{k!} =\text {number of subsets}  \end {equation*}
                                                                                      
                                                                                      
</p><!-- l. 232 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='meaning-vs-algebra'><span class='titlemark'>1.2   </span> <a id='x1-40001.2'></a>Meaning vs Algebra</h4>
<!-- l. 234 --><p class='noindent'>There are many examples in combinatorics where we can manipulate the algebra to get a result or
relationship.
</p><!-- l. 236 --><p class='noindent'>This will tell you that something is true, but not <span class='underline'>why</span> it is true.
</p><!-- l. 238 --><p class='noindent'>We wish to find relationships between things we know how to count and things we want to count.
</p><!-- l. 240 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 242 --><p class='noindent'>Show \(\binom {n}{k} = \binom {n}{n-k}\)
</p><!-- l. 244 --><p class='noindent'>We see that \(\binom {n}{k}\) is the number of subsets of size \(k\) of \(\{1,2,\ldots ,n\}\).
</p><!-- l. 246 --><p class='noindent'>Let \(S = \{a_1,a_2,\ldots ,a_k\}\) be a subset of size \(k\) of \(\{1,\ldots ,n\}\).
</p><!-- l. 248 --><p class='noindent'><span class='underline'>Notice</span>
</p><!-- l. 250 --><p class='noindent'>\(S' = \{1,2,\ldots ,n\} \setminus S\) is a subset of size \(n-k\).
</p><!-- l. 252 --><p class='noindent'>(I.e if \(n=10\), \(A = \{2,3,5,7\}\) then \(A^c = \{1,4,6,8,9,10\}\)).
</p><!-- l. 254 --><p class='noindent'>We see every \(A\), a subset of size \(k\) corresponds to a unique \(A^c\), a subset of size \(n-k\). Further every subset of size \(n-k\) can be
constructed in this way.
</p><!-- l. 256 --><p class='noindent'>This tells us that the number of subsets of size \(k\) is the same as the number of subsets of size \(n-k\).
</p><!-- l. 259 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='bijections'><span class='titlemark'>1.3   </span> <a id='x1-50001.3'></a>Bijections</h4>
<!-- l. 261 --><p class='noindent'><span class='underline'>Definition</span> Let \(A\) and \(B\) be sets.
</p><!-- l. 263 --><p class='noindent'>
     </p><ol class='enumerate1'>
<li class='enumerate' id='x1-5002x1'>
     <!-- l. 264 --><p class='noindent'>A map \(f: A \to B \) is said to be surjective (onto) if \(\forall b \in B\) there exists (at least one) \(a \in A\) with \(f(a)=b\) (all \(b\)’s are covered).
     </p><!-- l. 266 --><p class='noindent'><span class='underline'>Example</span>
     </p><!-- l. 268 --><p class='noindent'>\(f: \{1,2,3,4\} \to \{1,2\}\) by \(f(1) = 1, f(2) = f(3) = f(4) = 2\)
     </p></li>
<li class='enumerate' id='x1-5004x2'>
     <!-- l. 270 --><p class='noindent'>A map \(f: A \to B\) is said to be injective if every \(a \in A\) maps to a unique \(b \in B\) (Sometimes called one-to-one).
     </p><!-- l. 272 --><p class='noindent'><span class='underline'>Example</span>
     </p><!-- l. 274 --><p class='noindent'>\(f: \{1,2\} \to \{1,2,3,4\}\) by \(f(1) = 2, f(2) = 4\)
     </p></li>
<li class='enumerate' id='x1-5006x3'>A map \(f: A \to B\) is called bijective (or one-to-one &amp; onto) if it is both surjective and injective.
</li></ol>
                                                                                      
                                                                                      
<!-- l. 280 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 282 --><p class='noindent'>\(f: \{1,2,3\} \to \{2,3,5\}\) by \(f(1)=2, f(2)=3, f(3)=5\)
</p><!-- l. 284 --><p class='noindent'>Note, bijections can be reversed.
</p><!-- l. 286 --><p class='noindent'><span class='underline'>See</span>
</p><!-- l. 288 --><p class='noindent'>\(f^{-1}(2) = 1\) \(f^{-1}(3)=2\) \(f^{-1}(5)=3\)
</p><!-- l. 292 --><p class='noindent'><span class='underline'>Observation</span>
</p><!-- l. 294 --><p class='noindent'>
     </p><ol class='enumerate1'>
<li class='enumerate' id='x1-5008x1'>If there is a surjection \(f: A \to B\), then \(|A| \ge |B|\)
     </li>
<li class='enumerate' id='x1-5010x2'>If there is an injection \(f: A \to B\), then \(|A| \le |B|\)
     </li>
<li class='enumerate' id='x1-5012x3'>If there is a bijection \(f: A \to B\), then \(|A| = |B|\)</li></ol>
<!-- l. 300 --><p class='noindent'><span class='underline'>Notation</span> If there is a bijection \(f: A \to B\), we say \(A \leftrightharpoons \) B.
</p><!-- l. 303 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 305 --><p class='noindent'>Show \begin {equation*}  \binom {n}{k} = \binom {n-1}{k-1} + \binom {n-1}{k}  \end {equation*} Let \(B(n,k)\) be the set of subsets of \(\{1,\ldots ,n\}\) of size \(k\).
</p><!-- l. 311 --><p class='noindent'><span class='underline'>Notice</span>
</p><!-- l. 317 --><p class='noindent'>\begin {align*}  |B(n,k)| &amp;= \binom {n}{k} \\ |B(n-1,k-1)| &amp;= \binom {n-1}{k-1} \\ |B(n-1,k-1)| &amp;= \binom {n-1}{k} \\  \end {align*}
</p><!-- l. 319 --><p class='noindent'><span class='underline'>Ex</span> \(B(3,2) = \{ \{1,2\}, \{1,3\}, \{2,3\} \}\) all subsets of size \(2\) of numbers from \(1-3\).
</p><!-- l. 321 --><p class='noindent'>Our goal is to get a bijection from \(B(n,k)\) to \(B(n-1,k-1) \cup B(n-1,k)\)
</p><!-- l. 323 --><p class='noindent'>Notice \(B(n-1,k-1)\) and \(B(n-1,k)\) are disjoint (since they have different sizes). This gives,
</p><!-- l. 325 --><p class='noindent'>\(|B(n-1,k-1) \cup B(n-1,k)| = | B(n-1,k-1)| + |B(n-1, k)|\)
</p><!-- l. 328 --><p class='noindent'>We will construct a map \(f\) with
</p><!-- l. 330 --><p class='noindent'>\(f: B(n,k) \to B(n-1,k-1) \cup B(n-1, k)\) by
</p><!-- l. 332 --><p class='noindent'>\(f(\{a_1,a_2,\ldots ,a_k\}) = \{a_1,\ldots ,a_k\} \setminus \{n\}\)
</p><!-- l. 334 --><p class='noindent'>If \(n \notin \{a_1,a_2,\ldots ,a_k\}\) we see \(f(\{a_1,\ldots ,a_k\}) = \{a_1,\ldots ,a_k\} \in B(n-1, k)\)
</p><!-- l. 336 --><p class='noindent'>If \(n \in \{a_1,a_2,\ldots ,a_k\}\) then \(f(\{a_1,\ldots ,a_k\})\) is size \(k-1\) and uses numbers \(\{1,\ldots ,n-1\}\).
</p><!-- l. 338 --><p class='noindent'>This gives \(f(\{a_1,\ldots ,a_k\}) \in B(n-1,k-1)\)
</p><!-- l. 340 --><p class='noindent'>Question: Is this a bijection?
</p><!-- l. 342 --><p class='noindent'>Notice if \(n \notin \{a_1,\ldots ,a_k\}\) this map is injective and surjective. The inverse map is \(f^{-1}(\{a_1,\ldots ,a_k\}) = \{a_1,\ldots ,a_k\}\).
</p><!-- l. 344 --><p class='noindent'>If \(n \in \{a_1, \ldots , a_k\}\), say
</p><!-- l. 346 --><p class='noindent'>\(\{a_1,\ldots ,a_k\} = \{a_1,\ldots ,a_{k-1}, n\}\) and \(f^{-1}(\{a_1,\ldots , a_{k-1}, n\}) = \{a_1, \ldots , a_{k-1}\} \cup \{n\}\)
</p><!-- l. 348 --><p class='noindent'>This gives us that \(f\) is a bijection. Hence
</p><!-- l. 350 --><p class='noindent'>\(|B(n,k)| = |B(n-1, k)| + |B(n-1, k-1)|\)
</p><!-- l. 352 --><p class='noindent'>\(\implies \binom {n}{k} = \binom {n-1}{k} + \binom {n-1}{k-1}\) as required.
                                                                                      
                                                                                      
</p><!-- l. 354 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 356 --><p class='noindent'>Let \(n \ge 0 \), and \(t \ge 1\). A multiset of size \(n\) with \(t\) types is a list \((a_1, \ldots , a_t)\) where \(a_1 + \ldots + a_t = n\)
</p><!-- l. 358 --><p class='noindent'><span class='underline'>Example</span> A person has \(10\) pets, (fish, cats, and dogs)
</p><!-- l. 360 --><p class='noindent'>Here \(n=10, t=3\). We can have the list \((7,2,1)\).
</p><!-- l. 362 --><p class='noindent'>We could have \(t=4\) types (last type being birds). Then we have \((7,2,1,0)\) fish, cats, dogs, and birds respectively.
</p><!-- l. 364 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 366 --><p class='noindent'>The number of multisets of n with t types is \begin {align*}  \binom {n+t-1}{t-1}  \end {align*}
</p><!-- l. 371 --><p class='noindent'><span class='underline'>Proof</span>
</p><!-- l. 373 --><p class='noindent'>We will do this by a bijective method. Let \(A\) be the set of subsets of size \(t-1\) of \(\{1,\ldots ,n+t-1\}\).
</p><!-- l. 375 --><p class='noindent'>Clearly \(|A| = \binom {n+t-1}{t-1}\)
</p><!-- l. 377 --><p class='noindent'>Let \(B\) be our set of multisets of size \(n\) with \(t\) types.
</p><!-- l. 379 --><p class='noindent'>For example, we could have \(n=10, t=4\).
</p><!-- l. 381 --><p class='noindent'>Consider the subject \(A\) given by
</p><!-- l. 383 --><p class='noindent'>\(\circ \circ \circ \circ \circ \circ \circ \bullet \circ \circ \bullet \circ \bullet \)
</p><!-- l. 385 --><p class='noindent'>Here there are \(13 = n+t-1\) circles, of which \(3=t-1\) are erased off.
</p><!-- l. 387 --><p class='noindent'>\(\underbrace {(\circ \circ \circ \circ \circ \circ \circ )}_{\text {7 fish}} \bullet \underbrace {(\circ \circ )}_{\text {2 cats}} \bullet \underbrace {(\circ )}_{\text {1 dog}} \bullet \underbrace {}_{\text {0 birds}}\)
</p><!-- l. 389 --><p class='noindent'>This (admittedly non-rigorously defined) map is a bijection from \(A\) to \(B\).
</p><!-- l. 391 --><p class='noindent'>This gives us \(|A| = |B|\)
</p><!-- l. 395 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='generating-series'><span class='titlemark'>2   </span> <a id='x1-60002'></a>Generating Series</h3>
<!-- l. 397 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='formal-power-series'><span class='titlemark'>2.1   </span> <a id='x1-70002.1'></a>Formal Power Series</h4>
<!-- l. 399 --><p class='noindent'>In Math138 we considered power series/Taylor series, etc. Key difference in Math239 is we don’t care about
convergence.
</p><!-- l. 401 --><p class='noindent'>What we care about are the coefficients and the information they carry.
</p><!-- l. 403 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 405 --><p class='noindent'>A formal power series \(A(x) = \sum _{n=0}^{\infty } a_nx^n = a_0 + a_1x + a_2x^2 + \ldots \)
</p><!-- l. 407 --><p class='noindent'><span class='underline'>Note</span>: Often the \(a_n\) are positive integers, and typically represent the size of some set we are interested
in.
</p><!-- l. 409 --><p class='noindent'><span class='underline'>Example</span>: Let \(a_n\) be the number of lists of \(\{1,2,\ldots ,n\}\). In this case \(a_n = n!\)
</p><!-- l. 411 --><p class='noindent'>We create the power series
</p><!-- l. 415 --><p class='noindent'>\begin {align*}  A(x) = \sum _{n=0}^{\infty } a_nx^n = \sum _{n=0}^{\infty }n!x^n = 1 + x + 2x^2 + 6x^3  \end {align*}
</p><!-- l. 417 --><p class='noindent'><span class='underline'>Note</span>: This only converges at \(x=0\). We don’t care.
</p><!-- l. 419 --><p class='noindent'>We can (and do) add and multiply formal power series in the obvious way.
</p><!-- l. 421 --><p class='noindent'><span class='underline'>Example</span>
                                                                                      
                                                                                      
</p><!-- l. 425 --><p class='noindent'>\begin {align*}  \sum _{n=0}^{\infty }a_nx^n + \sum _{n=0}^{\infty }b_nx^n = \sum _{n=0}^{\infty }(a_n+b_n)x^n  \end {align*}
</p><!-- l. 427 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 434 --><p class='noindent'>\begin {align*}  (\sum _{n=0}^{\infty }a_nx^n)(\sum _{n=0}^{\infty }b_nx^n) &amp;= (a_0 + a_1x + a_2x^2 + \ldots ) \cdot (b_0 + b_1x + b_2x^2 + \ldots ) \\ &amp;= a_0b_o + (a_0b_1 + a_1b_0)x + (a_0b_2 + a_1b_1 + a_2b_0)x^2 \\ &amp;= \sum _{n=0}^{\infty } (\sum _{k=0}^{n}a_kb_{n-k})x^n  \end {align*}
</p><!-- l. 436 --><p class='noindent'><span class='underline'>Note</span>
</p><!-- l. 438 --><p class='noindent'>We often call \(x\) an indeterminate, not a variable. A variable is a placeholder that we occasionally evaluate at. We
(almost never) evaluate at \(x\). Hence we call it an indeterminate.
</p><!-- l. 440 --><p class='noindent'>We often manipulate formal power series algebraically disregarding convergences.
</p><!-- l. 442 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 444 --><p class='noindent'>Let \(A(x) = \sum _{n=0}^{\infty }x^n = 1 + x + x^2 + \ldots \)
</p><!-- l. 446 --><p class='noindent'>Notice \(x \cdot A(x) = x + x^2 + x^3 + \ldots \)
</p><!-- l. 448 --><p class='noindent'>This gives \(A(x) - xA(x) = 1 + 0x + 0x^2 + 0x^3 + \ldots = 1\)
</p><!-- l. 450 --><p class='noindent'>Or equivalently,
</p><!-- l. 452 --><p class='noindent'>\((1-x)(A(x)) = 1\)
</p><!-- l. 454 --><p class='noindent'>Or \begin {align*}  A(x) &amp;= \frac {1}{1-x} \leftarrow \text {(not a formal power series)} \\ (1-x) &amp;= \frac {1}{A(x)} \leftarrow \text {(not a formal power series)} \\  \end {align*}
</p><!-- l. 460 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 462 --><p class='noindent'>Let \(n \ge 0\) be fixed. Let \(a_k\) be the number of subsets of \(\{1,2,\ldots ,n\}\) of size \(k\).
</p><!-- l. 464 --><p class='noindent'><span class='underline'>Show</span>
</p><!-- l. 468 --><p class='noindent'>\begin {align*}  \sum _{k=0}^{\infty }a_kx^k = \sum _{k=0}^{n}a_kx^k = \sum _{k=0}^{\infty }\binom {n}{k}x^k = (1+x)^n  \end {align*}
</p><!-- l. 470 --><p class='noindent'><span class='underline'>Note</span> if \(k &gt; n\), then \(a_k = 0\). Hence the first equality (everything after \(n\) is 0)
</p><!-- l. 472 --><p class='noindent'>Second equality comes from previous work \((a_k = \binom {n}{k})\)
</p><!-- l. 474 --><p class='noindent'>Let \(P(n)\) be the set of all subsets of \(\{1,2,\ldots ,n\}\)
</p><!-- l. 476 --><p class='noindent'>Let \(B = \) set of all \((b_1, \ldots , b_n)\) with \(b_i \in \{0,1\}\)
</p><!-- l. 478 --><p class='noindent'>Let \(f(\{c_1,\ldots ,c_k\}) = (b_1,\ldots ,b_n)\) where \(b_i = \begin {cases} 1 &amp; \text {if } i \in \{c_1, \ldots , c_k\} \\ 0 &amp; \text {if } i \notin \{c_1, \ldots , c_k\} \end {cases}\)
</p><!-- l. 483 --><p class='noindent'>Let \(n=10\)
</p><!-- l. 485 --><p class='noindent'>\(f(\{1,2,5,7\}) = (\underbrace {1}_{1},\underbrace {1}_{2},0,0,\underbrace {1}_{5},0,\underbrace {1}_{7},0,0,0)\)
</p><!-- l. 487 --><p class='noindent'>We see \(f^{-1}((b_1, \ldots , b_n)) = \{ i : b_1 = 1\}\) \(f^{-1}((0,1,1,0,1)) = \{2,3,5\}\)
</p><!-- l. 490 --><p class='noindent'>We have
</p><!-- l. 501 --><p class='noindent'>\begin {align*}  \sum _{k=0}^{n}a_kx^k = \sum _{k=0}^{n}\sum _{\{c_1,\ldots ,c_k\} \text {}}x^k &amp;= \sum _{k=0}^{n}\sum _{(b_1,\ldots ,b_n) \sum _{b_i}=k} x^{b_1+\ldots +b_k} \\ &amp;= \sum _{(b_1,\ldots ,b_n)\in B} x^{b_1+\ldots +b_n} \\ &amp;= \sum _{b_1 \in \{0,1\}b_2\in \{0,1\}b_n \in \{0,1\}}x^{b_1+\ldots +b_n} \\ &amp;= \sum _{b_1\in \{0,1\}} \sum _{b_2\in \{0,1\}} \ldots \sum _{b_n \in \{0,1\}} x^{b_1+\ldots +b_n} \\ &amp;= \sum _{b_1\in \{0,1\}} \sum _{b_2\in \{0,1\}} \ldots \sum _{b_n \in \{0,1\}} x^{b_1+\ldots +b_n} \\ &amp;= \sum _{b_1 \in \{0,1\}} x^{b_1} \sum _{b_2 \in \{0,1\}}x^{b_2} \ldots \sum _{b_n \in \{0,1\}}x^{b_n} \\ &amp;= (1+x)(1+x)\ldots (1+x) \\ &amp;=(1+x)^n  \end {align*}
</p><!-- l. 503 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 505 --><p class='noindent'>Show \begin {align*}  \binom {m+n}{k} = \sum _{j=0}^{k}\binom {m}{j}\binom {n}{k-j}  \end {align*}
</p><!-- l. 510 --><p class='noindent'>Notice \begin {align*}  (1+x)^{m+n} = \sum _{k=0}^{m+n}\binom {m+n}{k}x^k  \end {align*}
</p><!-- l. 515 --><p class='noindent'>Further,
</p><!-- l. 520 --><p class='noindent'>\begin {align*}  (1+x)^{m+n} &amp;= (1+x)^m(1+x)^n \\ &amp;= (\sum _{j=0}^{m}\binom {m}{j}x^j)(\sum _{i=0}^{n}\binom {n}{i}x^i)  \end {align*}
</p><!-- l. 522 --><p class='noindent'>This gives us
</p><!-- l. 529 --><p class='noindent'>\begin {align*}  (1+x)^{m+n} &amp;= \sum _{j=0}^{m}\sum _{i=0}^{n}\binom {m}{j}\binom {n}{i}x^{j+1} \\ &amp;= \sum _{k=0}^{m+n}\sum _{i+j=k}^{}\binom {m}{j}\binom {n}{i}x^{j+i} \\ &amp;= \sum _{k=0}^{m+n}\sum _{i+j=k}^{}\binom {m}{j}\binom {n}{k-j}x^k \\ &amp;= \sum _{k=0}^{m+n}\sum _{j=0}^{k}\binom {m}{j}\binom {n}{k-j}x^k  \end {align*}
</p><!-- l. 531 --><p class='noindent'>By looking at the coefficient in front of \(x^k\) we get that left hand side \(=\) right hand side.
</p><!-- l. 533 --><p class='noindent'>Notation, \([x^k](\sum _{}^{}a_kx^k) = a_k =\) coefficient in front of \( x^a\).
                                                                                      
                                                                                      
</p><!-- l. 535 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='generating-series1'><span class='titlemark'>2.2   </span> <a id='x1-80002.2'></a>Generating Series</h4>
<!-- l. 537 --><p class='noindent'>Let \(g_1, g_2, \ldots \) be a sequence of numbers that we care about and encode some information.
</p><!-- l. 539 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 541 --><p class='noindent'>\(g_n = \#\) of binary strings of length \(n\)
</p><!-- l. 543 --><p class='noindent'>\(g_n = \#\) of partial lists of length \(n\) of \(\{1,2,\ldots ,100\}\)
</p><!-- l. 545 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 547 --><p class='noindent'>We define the generating series as
</p><!-- l. 549 --><p class='noindent'>\(G(x) = \sum _{n=0}^{\infty }g_nx^n\)
</p><!-- l. 551 --><p class='noindent'>We often generate these series using a weight function.
</p><!-- l. 553 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 555 --><p class='noindent'>Let \(A\) be a set. We say \(w\) is a weight function where \(\omega : A \to \mathbb {N}\). We further require that
</p><!-- l. 557 --><p class='noindent'>\(A_n = \omega ^{-1}(n) = \{a \in A: \omega (a) = n\}\) is a finite set \(\forall n\).
</p><!-- l. 559 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 561 --><p class='noindent'>Let \(A\) = the set of all binary strings of any length.
</p><!-- l. 563 --><p class='noindent'>I.e. \(A = \{\epsilon , 0, 1, 00, 01, 10, 11, 000, \ldots \}\)
</p><!-- l. 565 --><p class='noindent'>Good choices for \(\omega \) </p>
     <ul class='itemize1'>
     <li class='itemize'>The length of the string (in this case \(|A_n| = 2^n\))</li></ul>
<!-- l. 570 --><p class='noindent'>Bad choice for \(\omega \) </p>
     <ul class='itemize1'>
     <li class='itemize'>The number of \(1\)’s in the string</li></ul>
<!-- l. 575 --><p class='noindent'>I.e. \(A = \{1,10,01,1000,1000,\ldots \}\)
</p><!-- l. 577 --><p class='noindent'>Here \(A_1\) is infinite.
</p><!-- l. 579 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 581 --><p class='noindent'>Let \(A\) be the set of all subsets of \(\{1,2,\ldots ,10\}\)
</p><!-- l. 583 --><p class='noindent'>Define \(\omega : A \to \mathbb {N}\) by \(w(\{a_1,\ldots ,a_k\}) = |\{a_1,\ldots ,a_k\}| = k\)
</p><!-- l. 591 --><p class='noindent'>\begin {align*}  A_0 &amp;= \omega ^{-1}(0) = \{\{\}\} \\ A_1 &amp;= \omega ^{-1}(1) = \{\{1\},\{2\},\ldots ,\{10\}\} \\ \\ A_{10} &amp;= \omega ^{-1}(10) = \{1,2,3,4,5,6,7,8,9,10\}\\ A_{11} &amp;= \{\}, A_n = \{\} \text { for } n \ge 11  \end {align*}
</p><!-- l. 593 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 595 --><p class='noindent'>We define the generating series for \(A\) with respect to \(\omega \) as
</p><!-- l. 597 --><p class='noindent'>\(\Phi _{A}^{\omega }(x) = \sum _{a \in A}^{}x^{\omega (a)}\)
</p><!-- l. 599 --><p class='noindent'>In this case, \begin {align*}  \Phi _{A}^{\omega }(x) &amp;= x^{\omega (\{\})} + x^{\omega (\{1\})} + x^{\omega (\{2\})} + \ldots + x^{\omega \{1,2,\ldots ,10\})} \\ &amp;= x^0 + \underbrace {x^1 + \ldots + x^1}_{10 \text { subsets of size } 1} + \underbrace {x^2 + \ldots + x^2}_{10 \text { subsets of size } 2} + \ldots + x^{10} \\ &amp;= x^0 + \binom {10}{1}x + \binom {10}{2}x^2 + \ldots + \binom {10}{9}x^9 + \binom {10}{10}x^{10} \\ &amp;= \sum _{n=0}^{10}|A_n|x^n \\ &amp;= \sum _{n=0}^{\infty }|A_n|x^n \\ &amp;= \sum _{n=0}^{10}\binom {10}{n}x^n  \end {align*}
</p><!-- l. 609 --><p class='noindent'>Note \(|A_n| = \#\) of subsets of size \(n\) taken from \(\{1,\ldots ,10\} = \binom {10}{n}\)
</p><!-- l. 611 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 613 --><p class='noindent'>Let \(A\) be a set and \(\omega \) a weight function. Then
</p><!-- l. 617 --><p class='noindent'>\begin {align*}  \Phi _{A}^{\omega }(x) &amp;= \sum _{a \in A}^{}x^{\omega (a)} = \sum _{n=0}^{\infty }|A_n|x^{n}  \end {align*}
</p><!-- l. 626 --><p class='noindent'>\begin {align*}  \sum _{a \in A}^{}x^{\omega (a)} &amp;= \sum _{a \in A_0 \cup A_1 \cup A_2 \ldots }^{}x^{\omega (a)} \\ &amp;= \sum _{n=0}^{\infty }\sum _{a\in A_n}^{}x^{\omega (a)} \\ &amp;= \sum _{n=0}^{\infty }\sum _{a\in A_n}^{}x^{n} \\ &amp;= \sum _{n=0}^{\infty }\sum _{a\in A_n}1 \\ &amp;= \sum _{n=0}^{\infty }x^n|A_n| \\ &amp;= \sum _{n=0}^{\infty }|A_n|x^n \text { as required.}  \end {align*}
                                                                                      
                                                                                      
</p><!-- l. 628 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 630 --><p class='noindent'>Let \(g_n = \#\) of multisets of \(n\) with \(t\) types \(= \binom {n+t-1}{t-1}\)
</p><!-- l. 632 --><p class='noindent'>Use generating series to show
</p><!-- l. 636 --><p class='noindent'>\begin {align*}  \sum _{n=0}^{\infty }g_nx^n = \sum _{n=0}^{\infty }\binom {n+t-1}{t-1}x^n = \frac {1}{(1-x)^t}  \end {align*}
</p><!-- l. 638 --><p class='noindent'><span class='underline'>Question</span> What is \(A\) and what is \(\omega \)?
</p><!-- l. 640 --><p class='noindent'>We want \(A_n\) to be all the multisets of \(n\) with \(t\) types.
</p><!-- l. 642 --><p class='noindent'>That is
</p><!-- l. 644 --><p class='noindent'>\(A_n = \{(a_1,\ldots ,a_t): a_1 + a_2 + \ldots + a_t = n\}\)
</p><!-- l. 646 --><p class='noindent'>We can define \(w((a_1,\ldots ,a_k))=a_1 + \ldots + a_t\)
</p><!-- l. 648 --><p class='noindent'>We can use \begin {align*}  A &amp;= \{(a_1,\ldots ,a_t):a_1,\ldots ,a_t \in \mathbb {N}\} \\ &amp;= \underbrace {\mathbb {N} \times \mathbb {N} \times \mathbb {N} \times \ldots \times \mathbb {N}}_{t \text { times}} \\ &amp;= \mathbb {N}^t  \end {align*}
</p><!-- l. 655 --><p class='noindent'>This gives
</p><!-- l. 664 --><p class='noindent'>\begin {align*}  \sum _{}^{}\binom {n+t-1}{t-1}x^n &amp;= \sum _{a \in A}x^{\omega (a)} = \sum _{n=0}^{\infty }|A_n|x^n \\ \sum _{a \in A}x^{\omega (a)} &amp;= \sum _{(a_1,\ldots ,a_t)\in A} x^{a_1 + \ldots a_t} \\ &amp;= \sum _{a_1 = 0 \ldots \infty a_2 = 0 \ldots \infty a_t = 0 \ldots \infty }^{} x^{a_1}x^{a_2}\ldots x^{a_t} \\ &amp;= (\sum _{a_1=0}^{\infty }x^{a_1})(\sum _{a_2=0}^{\infty }x^{a_2})\ldots (\sum _{a_t=0}^{\infty }x^{a_t}) \\ &amp;= (\frac {1}{1-x})(\frac {1}{1-x})\ldots (\frac {1}{1-x}) \\ &amp;= (\frac {1}{1-x})^t  \end {align*}
</p><!-- l. 666 --><p class='noindent'>Recall from Math138 that
</p><!-- l. 668 --><p class='noindent'>\(\frac {1}{1-x} = 1+x+x^2+x^3+\ldots \forall |x| \le 1\)
</p><!-- l. 670 --><p class='noindent'>We don’t care about convergence.
</p><!-- l. 672 --><p class='noindent'>We notice from this that
</p><!-- l. 674 --><p class='noindent'>\(1 = (1-x)(1+x+x^2+\ldots )\)
</p><!-- l. 676 --><p class='noindent'>Both \((1-x)\) and \((1+x+x+^2+\ldots )\) are formal power series.
</p><!-- l. 678 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 680 --><p class='noindent'>Let \(A(x)\) and \(B(x)\) be formal power series. If \(A(x)B(x)=1\), then we say \(A(x)\) is an inverse of \(B(x)\) and similarly \(B(x)\) is an inverse of
\(A(x)\).
</p><!-- l. 682 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 684 --><p class='noindent'>Let \(A(x) = 1-x-x^2\)
</p><!-- l. 686 --><p class='noindent'>Find \(B(x)\) (if it exists) such that \(A(x)B(x)=1\)
</p><!-- l. 688 --><p class='noindent'>Write \(B(x) = b_0 + b_1x + b_2x^2 + b_3x^3 + \ldots \)
</p><!-- l. 690 --><p class='noindent'>This gives
</p><!-- l. 692 --><p class='noindent'>\(A(x)B(x) = (1-x-x^2)(b_0+b_1x+b_2x^2+\ldots ) = b_0 + (b_1 - b_0)x + (b_2 - b_1 - b_0)x^2 + (b_3 - b_2 - b_1) x^3 + \ldots \)
</p><!-- l. 694 --><p class='noindent'>Notice \([x^0]1 = 1. [x^0]A(x)B(x)=b_0\). Hence \(b_0 = 1\)
</p><!-- l. 696 --><p class='noindent'>\([x^1]1=\) coefficient in front \(x^1\) of the power series \(= 0\).
</p><!-- l. 698 --><p class='noindent'>\([x^1]A(x)B(x)=b_1-b_0 = b_1-1\). Hence \(b_1 = 1\)
</p><!-- l. 700 --><p class='noindent'>Next \([x^2]1 = 0\)
</p><!-- l. 702 --><p class='noindent'>\([x^2]A(x)B(x) = b_2-b_1-b_0\)
</p><!-- l. 704 --><p class='noindent'>Hence \(b_2 = 2\)
</p><!-- l. 706 --><p class='noindent'>For general \(n \ge 2\) we have.
</p><!-- l. 708 --><p class='noindent'>\([x^n]1=0\)
</p><!-- l. 710 --><p class='noindent'>\([x^n]A(x)B(x) = b_n - b_{n-1}-b_{n-2}\)
</p><!-- l. 712 --><p class='noindent'>\(\implies b_n = b_{n-1} + b_{n-2}\)
</p><!-- l. 714 --><p class='noindent'>Notice
</p><!-- l. 716 --><p class='noindent'>\(b_0=1, b_1=1,b_2=2, b_3=3, b_4=5, b_5=8, b_6=13,\ldots \)
                                                                                      
                                                                                      
</p><!-- l. 718 --><p class='noindent'>This is the Fibonacci sequence.
</p><!-- l. 720 --><p class='noindent'>I.e \((1-x-x)(1+x+2x^2+3x^3+5x^4+8x^5+\ldots ) = 1\)
</p><!-- l. 722 --><p class='noindent'>We found the inverse.
</p><!-- l. 724 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 726 --><p class='noindent'>Show \(A(x)=x+x^2\) does not have an inverse.
</p><!-- l. 728 --><p class='noindent'>Assume it does, say
</p><!-- l. 730 --><p class='noindent'>\(B(x)=b_0+b_1x+b_2x^2+\ldots \)
</p><!-- l. 732 --><p class='noindent'>As before we will consider \(A(x)B(x)=1\), and match coefficients for \(x^n\) for various \(n\). I.e. consider
</p><!-- l. 734 --><p class='noindent'>\([x^n]1 = [x^n]A(x)B(x)\)
</p><!-- l. 736 --><p class='noindent'>For \(n=0, [x^0]1=1\)
</p><!-- l. 738 --><p class='noindent'>\(A(x)B(x) = b_0x + (b_1 + b_0)x^2 + (b_2+b_1)x^3+\ldots \)
</p><!-- l. 740 --><p class='noindent'>For \(n=0 [x^0]A(x)B(x)=0\)
</p><!-- l. 742 --><p class='noindent'>Note \(1 \ne 0\), hence there are no solutions, and there is no inverse.
</p><!-- l. 744 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 746 --><p class='noindent'>Let \(A(x) = a_0 + a_1x + \ldots \) be a formal power series. Then there exists an inverse \(B(x) \iff a_0 \ne 0\)
</p><!-- l. 748 --><p class='noindent'>Let \(A(x)\) and \(B(x)\) be formal power series. We define the composition as
</p><!-- l. 750 --><p class='noindent'>\(A(B(x)) = a_0 + a_1B(x) + a_2B(x)^2+\ldots \) (assuming it exists)
</p><!-- l. 752 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 754 --><p class='noindent'>Let \(A(x) = 1+x+x^2+\ldots \) Let \(B(x) = x+x^2\)
</p><!-- l. 757 --><p class='noindent'>So \begin {align*}  A(B(x)) &amp;= 1+(x+x^2)+(x+x^2)^2 + (x+x^2)^3+\ldots \\ &amp;= 1+x+2x^2+3x^3+5x^4+8x^5+\ldots  \end {align*}
</p><!-- l. 763 --><p class='noindent'>Note: This series is the same as the inverse of \((1-x-x^2)\). Why?
</p><!-- l. 765 --><p class='noindent'><span class='underline'>Example</span> Let \(A(x)\) be as before, \((1+x+x^2+x^3+\ldots )\) and \(B(x) = 1+x\)
</p><!-- l. 770 --><p class='noindent'>\begin {align*}  A(B(x)) &amp;= 1 + (1+x) + (1+x)^2 + (1+x)^3 + \ldots \\ &amp;= \infty + \infty x + \infty x^2 + \ldots \leftarrow \text {Garbage}  \end {align*}
</p><!-- l. 772 --><p class='noindent'>The composition is not well defined.
</p><!-- l. 774 --><p class='noindent'><span class='underline'>Theorem</span> Let \(A(x)\) and \(B(x)\) be formal power series. \(B(x)=b_0+b_1x+b_2x^2+\ldots \)
</p><!-- l. 776 --><p class='noindent'>If \(b_0\) then \(A(B(x))\) is well defined.
</p><!-- l. 778 --><p class='noindent'><span class='underline'>Pf</span>
</p><!-- l. 780 --><p class='noindent'>Assume \(b_0=0\). We can write \(B(x)=xC(x)\)
</p><!-- l. 785 --><p class='noindent'>\begin {align*}  \text {Hence } A(B(x)) &amp;= A(xC(x))\\ &amp;= a_0 + a_1xC(x) + a_2x^2C(x)^2 + \ldots  \end {align*}
</p><!-- l. 787 --><p class='noindent'>Notice \([x^n]A(xC(x)) = [x^n]\sum _{k=0}^{n}a_kx^kC(x)^k\)
</p><!-- l. 789 --><p class='noindent'>This sum is finite, hence all coefficients are finite.
</p><!-- l. 791 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 793 --><p class='noindent'>We say that a power series \(A(x)\) is rational if there exists polynomials \(P(x)\) and \(Q(x)\) such that
</p><!-- l. 795 --><p class='noindent'>\(\frac {P(x)}{Q(x)} = A(x)\) or \(P(x) = Q(x)A(x)\)
</p><!-- l. 797 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 799 --><p class='noindent'>Let \(A(x) = 1+x+2x^2+3x^3+5x^4+8x^5\)
</p><!-- l. 801 --><p class='noindent'>Notice \(A(x) = \frac {1}{1-x-x^2}\), hence \(A(x)\) is rational.
</p><!-- l. 803 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 805 --><p class='noindent'>Let \(A(x) = 1+\frac {1}{2}x-\frac {1}{8}x^2+\frac {1}{16}x^3-\frac {5}{128}x^4+\ldots \) such that \(A(x)A(x) = 1+x\)
                                                                                      
                                                                                      
</p><!-- l. 807 --><p class='noindent'><span class='ec-lmri-10'>Exercise </span>show \(A(x)\) is not rational.
</p><!-- l. 809 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='sum-lemma'><span class='titlemark'>2.3   </span> <a id='x1-90002.3'></a>Sum Lemma</h4>
<!-- l. 811 --><p class='noindent'>Let \(A\) and \(B\) be sets.
</p><!-- l. 813 --><p class='noindent'>Let \(A \cap B = \emptyset \) and \(S=A\cup B\)
</p><!-- l. 815 --><p class='noindent'>Let \(\omega \) be a weight function defined on \(S\) (and hence \(A\) and \(B\))
</p><!-- l. 817 --><p class='noindent'>Then \begin {align*}  \Phi _S^{\omega }(x) = \Phi _A^{\omega }(x) + \Phi _B^{\omega }(x)  \end {align*}
</p><!-- l. 822 --><p class='noindent'><span class='underline'>Proof</span>
</p><!-- l. 829 --><p class='noindent'>\begin {align*}  \Phi _S^{\omega }(x) = \sum _{s \in S}x^{\omega (s)} &amp;= \sum _{s\in A \cup B}x^{\omega (s)} \\ &amp;= \sum _{s \in A \text { or } s \in B}x^{\omega (s)} \\ &amp;= \sum _{s \in A}x^{\omega (s)} + \sum _{s \in B}x^{\omega (s)} \\ &amp;= \Phi _A^{\omega }(x) + \Phi _{B}^{\omega }(x)  \end {align*}
</p><!-- l. 831 --><p class='noindent'>Note
</p><!-- l. 836 --><p class='noindent'>\begin {align*}  \Phi _A^{\omega } &amp;= \sum _{n=0}^{\infty }|A_n|x^b \\ &amp;= \sum _{s \in S}x^{\omega (s)}  \end {align*}
</p><!-- l. 838 --><p class='noindent'>here, \(A_n = \omega ^{-1}(n) = \{s \in S: \omega (s)=n\}\)
</p><!-- l. 840 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 842 --><p class='noindent'>Let \(A\) be the subsets of \(\{1,2,\ldots ,n\}\) that contain \(n\), and \(B\) is all the subsets from \(\{1,\ldots ,n\}\) that do not contain \(n\).
</p><!-- l. 844 --><p class='noindent'>\(A \cup B = \emptyset \)
</p><!-- l. 846 --><p class='noindent'>Further, \(S=A \cup B\) is all the subsets of \(\{1,\ldots ,n\}\)
</p><!-- l. 848 --><p class='noindent'>Let \(w(\{c_1,\ldots ,c_k\}) = |\{c_1,\ldots ,c_k\}|\) be the size of the subset.
</p><!-- l. 850 --><p class='noindent'>Then \(\Phi _S^{\omega }(x) = \sum _{s \in S} x^{\omega (s)} = \sum _{k=0}^{\infty } |S_k|x^k\)
</p><!-- l. 852 --><p class='noindent'>Here \(S_k\) is all subsets of \(\{1,\ldots ,n\}\) of size \(k\).
</p><!-- l. 854 --><p class='noindent'>Hence, \(|S_k|=\binom {n}{k}\)
</p><!-- l. 856 --><p class='noindent'>This gives \(\Phi _{S}^{\omega }(x) = \sum _{k=0}^{\infty }\binom {n}{k}x^k = \sum _{k=0}^{n}\binom {n}{k}x^k\)
</p><!-- l. 859 --><p class='noindent'>\(A =\) subsets of \(\{1,\ldots ,n\}\) that contain \(n\).
</p><!-- l. 861 --><p class='noindent'>\(A_k =\) subsets of \(\{1,\ldots ,n\}\) that contain \(n\) and are of size \(k\).
</p><!-- l. 863 --><p class='noindent'>There is a natural bijection from \(A_n\) to \(\tilde {A_k} =\) subsets \(\{1,\ldots ,n-1\}\) of size \(k-1\).
</p><!-- l. 866 --><p class='noindent'>This is given by \(\{c_1,c_2,\ldots ,c_{k-1},n\} \to \{c_1,\ldots ,c_{k-1}\}\)
</p><!-- l. 868 --><p class='noindent'>The inverse is \(\{c_1,\ldots ,c_{k-1}\} \to \{c_1,c_2,\ldots ,c_{k-1},n\}\)
</p><!-- l. 870 --><p class='noindent'>This gives us \begin {align*}  \Phi _A^{\omega }(x) = \sum _{k=0}^{\infty }|A_k|x^k &amp;= \sum _{k=0}^{\infty }|\tilde {A_k}|x^k \\ &amp;= \sum _{k=0}^{\infty }\binom {n-1}{k-1}x^k  \end {align*}
</p><!-- l. 876 --><p class='noindent'>\(B_m = \) the subsets of size \(k\) from \(\{1,\ldots ,n\}\) that do not contain \(n\). We can equivalently think of \(B_m\) as the subsets of size \(k\) from
\(\{1,\ldots ,n-1\}\).
</p><!-- l. 878 --><p class='noindent'>This gives \(\Phi _B^{\omega }(x) = \sum _{k=0}^{\infty }|B_k|x^k = \sum _{k=0}^{\infty }\binom {n-1}{k}x^k\)
</p><!-- l. 880 --><p class='noindent'>By the Sum Lemma, we have:
</p><!-- l. 885 --><p class='noindent'>\begin {align*}  \Phi _S^{\omega }(x) &amp;= \Phi _A^{\omega }(x) + \Phi _B^{\omega }(x) \text { or} \\ \sum _{k=0}^{\infty }\binom {n}{k}x^k &amp;= \sum _{k=0}^{\infty }\binom {n-1}{k-1}x^k + \sum _{k=0}^{\infty }\binom {n-1}{k}x^k  \end {align*}
</p><!-- l. 887 --><p class='noindent'>Considering \([x^k]\) of both sides we get: \(\binom {n}{k} = \binom {n-1}{k-1} + \binom {n-1}{k}\)
                                                                                      
                                                                                      
</p><!-- l. 889 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='product-lemma'><span class='titlemark'>2.4   </span> <a id='x1-100002.4'></a>Product Lemma</h4>
<!-- l. 891 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 893 --><p class='noindent'>Let \(A\) be a set with weight function, \(\omega \), and \(B\) be a set with weight function \(\upsilon \), we define:
</p><!-- l. 895 --><p class='noindent'>\(S = A \times B = \{(a,b): a \in A, b \in B\}\)
</p><!-- l. 897 --><p class='noindent'>We define a weight function on \(S\) as:
</p><!-- l. 899 --><p class='noindent'>\(\mu (s) = \omega + \upsilon (s) = \omega \times \upsilon ((a,b)) = \omega (a) + \upsilon (b)\)
</p><!-- l. 901 --><p class='noindent'>Then \begin {align*}  \Phi _S^{\mu }(x) = \Phi _{A \times B}^{\omega \times \upsilon }(x) = \Phi _{A}^{\omega }(x) \cdot \Phi _{B}^{\upsilon }(x)  \end {align*}
</p><!-- l. 906 --><p class='noindent'><span class='underline'>Proof</span>
</p><!-- l. 914 --><p class='noindent'>\begin {align*}  \Phi _{S}^{\sigma }(x) &amp;= \sum _{s \in S}x^{\sigma (s)} \\ &amp;= \sum _{(a,b) \in A \times B} x^{\omega (a) + \upsilon (b)} \\ &amp;= \sum _{a \in A} \sum _{b \in B} x^{\omega (a)}x^{\upsilon (b)} \\ &amp;= (\sum _{a \in A} x^{\omega (a)})(\sum _{b \in B}x^{\upsilon (b)}) \\ &amp;= \Phi _{A}^{\omega }(x) \cdot \Phi _{B}^{\upsilon }(x)  \end {align*}
</p><!-- l. 916 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 918 --><p class='noindent'>Let \(A = \{1,2,3,4,5,6\}\) be the possibilities of a die. Let \(\omega (a) = a\).
</p><!-- l. 920 --><p class='noindent'>So \(\Phi _{A}^{\omega }(x) = x+x^2+x^3+x^4+x^5+x^6\)
</p><!-- l. 922 --><p class='noindent'>Let \(S = A \times A = \{(a,b) : a,b \in A\} = \{(1,1),(1,2),\ldots ,(2,1)\ldots ,\}\)
</p><!-- l. 924 --><p class='noindent'>In this case:
</p><!-- l. 931 --><p class='noindent'>\begin {align*}  \Phi _{A \times A}(x) &amp;= \Phi _{A}(x) \cdot \Phi _{A}(x) \\ &amp;= (\Phi _{A}(x))^2 \\ &amp;= (x+x^2+x^3+x^4+x^5+x^6)^2 \\ &amp;= x^2 + 2x^3 + 3x^4 + \underbrace {4x^5}_{4\text { ways to roll two dice such that their sum is equal to } 5} + 5x^6 + \ldots  \end {align*}
</p><!-- l. 933 --><p class='noindent'><span class='underline'>Recall</span>
</p><!-- l. 935 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 937 --><p class='noindent'>Let \(A\) and \(B\) be sets with weight \(\omega \) and \(\upsilon \). We define \(A \times B = \{(a,b):a \in A, b \in B\}\) and \(\omega \times \upsilon : A \times B \to N\) by \((\omega \times \upsilon )((a,b)) = \omega (a) + \upsilon (b)\)
</p><!-- l. 939 --><p class='noindent'>Then \(\Phi _{A \times B}^{\omega \times \upsilon } = \Phi _{A}^{\omega }(x) \cdot \Phi _{B}^{\upsilon }(x)\)
</p><!-- l. 941 --><p class='noindent'>We can apply this theorem to higher products.
</p><!-- l. 943 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='infinite-sum-lemma'><span class='titlemark'>2.5   </span> <a id='x1-110002.5'></a>Infinite Sum Lemma</h4>
<!-- l. 945 --><p class='noindent'>Notation
</p><!-- l. 947 --><p class='noindent'>\(A^k = \underbrace {A \times \ldots \times A}_{k \text { times}} = \{(a_1,\ldots ,a_k):a_i \in A\}\)
</p><!-- l. 949 --><p class='noindent'>We similarly define
</p><!-- l. 951 --><p class='noindent'>\(\omega ^k = \underbrace {\omega \times \ldots \times \omega }_{k \text { times}}\), by
</p><!-- l. 953 --><p class='noindent'>\((\omega ^k)(a_1, \ldots , a_k) = \omega (a_1) + \omega (a_2) + \ldots + \omega (a_k)\)
</p><!-- l. 955 --><p class='noindent'><span class='underline'>Define</span>
</p><!-- l. 959 --><p class='noindent'>\begin {align*}  A^* = \bigcup _{k=0}^{\infty }A^k  \end {align*}
</p><!-- l. 961 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 963 --><p class='noindent'>Let \(A = \{0,1\}\)
</p><!-- l. 965 --><p class='noindent'>\(A^* = A^0 \cup A^1 \cup A^2 \cup \ldots \)
</p><!-- l. 967 --><p class='noindent'>\( = \{(),(0),(1),(0,0),(0,1),(1,0),(1,1)\}\)
</p><!-- l. 969 --><p class='noindent'>We define \(\omega ^{*} : A^{*} \to \mathbb {N}\) by the property if \(a \in A^{k}\) then \(\omega ^{*}(a) = \omega ^{k}(a)\)
</p><!-- l. 971 --><p class='noindent'><span class='underline'>Example</span>
                                                                                      
                                                                                      
</p><!-- l. 973 --><p class='noindent'>Let \(A = \{1,2\}\) and \(\omega : A \to \mathbb {N}\) by \(\omega (1) = 1, \omega (2) = 2\).
</p><!-- l. 975 --><p class='noindent'>Then \((1,2,2,1,1) \in A^*\)
</p><!-- l. 977 --><p class='noindent'>\(w^*((1,2,2,1,1)) = w^5((1,2,2,1,1)) = 7\)
</p><!-- l. 979 --><p class='noindent'>There will be situations where \(\omega ^*\) is not a weight function. For example, if there exists \(a \in A\) with \(\omega (A) = 0\).
</p><!-- l. 981 --><p class='noindent'>Then \(\omega ^*(a)=0\), \(\omega ^*((a,a)) = 0+0=0\)
</p><!-- l. 983 --><p class='noindent'>\(\omega ^*((a_1,\ldots ,a_k)) = 0\)
</p><!-- l. 985 --><p class='noindent'>Hence \((\omega ^*)^{-1}(0) = \{\epsilon , (a),(a,a),(a,a,a),\ldots \}\)
</p><!-- l. 987 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 989 --><p class='noindent'>Let \(A\) be a set and \(\omega : A \to \mathbb {N}\) a weight function such that \(\omega (a) \ne 0, \forall a \in A\). Then,
</p><!-- l. 998 --><p class='noindent'>\begin {align*}  \Phi _{A^*}^{\omega ^*}(x) &amp;= \frac {1}{1- \Phi _{A}^{\omega }(x)} \\ \Phi _{A^*}^{\omega ^*}(x) &amp;= \Phi _{\bigcup _{k=0}^{\infty }A^k}^{\omega ^*}(x) \\ &amp;= \sum _{k=0}^{\infty }\Phi _{A^k}^{\omega ^*}(x) \\ &amp;= \sum _{k=0}^{\infty }\Phi _{A^k}^{\omega ^k}(x) \\ &amp;= \sum _{k=0}^{\infty }(\Phi _{A}^{\omega }(x))^k \\ &amp;= \frac {1}{1-\Phi _{A}^{k}}  \end {align*}
</p><!-- l. 1000 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1002 --><p class='noindent'>Let \(A = \{1,2\}\) and \(\omega :A \to \mathbb {N}\) as before with \(\omega (1)=1\), \(\omega (2)=2\).
</p><!-- l. 1004 --><p class='noindent'>\(A^* = \{(),(1),(1,1),(1,2),(2,1),(2,2)\}\)
</p><!-- l. 1011 --><p class='noindent'>\begin {align*}  \Phi _{A}^{\omega }(x) &amp;= x^{\omega (1)} + x^{\omega (2)} = x^1 + x^2 \\ \Phi _{A^*}^{\omega ^*}(x) &amp;= \frac {1}{1-\Phi _{A}^{\omega }(x)} \\ &amp;= \frac {1}{1-x-x^2} \\ &amp;= 1 + x + 2x^2 + 3x^3 + 5x^4 + \ldots  \end {align*}
</p><!-- l. 1013 --><p class='noindent'>We notice in this case that
</p><!-- l. 1015 --><p class='noindent'>\([x^4]\Phi _{A^*}^{\omega ^*}(x) = 5\)
</p><!-- l. 1017 --><p class='noindent'>These correspond to
</p><!-- l. 1019 --><p class='noindent'>\((1,1,1,1),(1,1,2),(1,2,1),(2,1,1),(2,2)\)
</p><!-- l. 1021 --><p class='noindent'>These are the \(5\) lists in \(A^*\) of any length using \(1\) and \(2\) that add to \(4\).
</p><!-- l. 1023 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='compositions'><span class='titlemark'>2.6   </span> <a id='x1-120002.6'></a>Compositions</h4>
<!-- l. 1025 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 1027 --><p class='noindent'>A composition is a list of positive integers. \((a_1,\ldots ,a_k)\)
</p><!-- l. 1029 --><p class='noindent'>The entries \(a_i\) are the parts.
</p><!-- l. 1031 --><p class='noindent'>The length of a composition \((a_1,\ldots ,a_k)\) is \(k\).
</p><!-- l. 1033 --><p class='noindent'>The size is \(|(a_1,\ldots ,a_k)| = a_1 + \ldots + a_k\)
</p><!-- l. 1035 --><p class='noindent'><span class='underline'>Examples</span>
</p><!-- l. 1037 --><p class='noindent'>The compositions of \(4\) include
</p><!-- l. 1039 --><p class='noindent'>\((1,1,1,1),(2,1,1),(1,1,2),(1,2,1),(2,2)\) from the last example.
</p><!-- l. 1041 --><p class='noindent'>The last three examples are
</p><!-- l. 1043 --><p class='noindent'>\((1,3),(3,1),(4)\).
</p><!-- l. 1045 --><p class='noindent'>Let \(\mathcal {C}\) be the set of all compositions. What is
</p><!-- l. 1047 --><p class='noindent'>\(\Phi _{\mathcal {C}}^{\text {size}}(x)\)
</p><!-- l. 1049 --><p class='noindent'>We know that there are \(8\) compositions of size \(4\), for example.
</p><!-- l. 1051 --><p class='noindent'>Let \(\mathcal {C}_1\) be all the compositions of length \(1\). \(\mathcal {C}_2\) of length \(2\), etc.
</p><!-- l. 1053 --><p class='noindent'>Then
</p><!-- l. 1055 --><p class='noindent'>\(\mathcal {C}_1 = \{(1),(2),(3),(4),\ldots \}\)
                                                                                      
                                                                                      
</p><!-- l. 1057 --><p class='noindent'>\(\mathcal {C}_2 = \{(1,1),(1,2),(2,1),(2,2),(1,3),\ldots \}\)
</p><!-- l. 1059 --><p class='noindent'>We have \(\Phi _{\mathcal {C}_1}^{\text {size}} = x + x^2 + x^3 = \frac {x}{1-x}\)
</p><!-- l. 1061 --><p class='noindent'>We note that \(\mathcal {C}_2 = \mathcal {C}_1 \times \mathcal {C}_1\) and in general, \(\mathcal {C}_k = (\mathcal {C}_1)^k\)
</p><!-- l. 1063 --><p class='noindent'>This allows us to write
</p><!-- l. 1072 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {C}}^{\text {size}}(x) &amp;= \sum _{k=0}^{\infty }\Phi _{\mathcal {C}}^{\text {size}} \\ &amp;= \sum _{k=0}^{\infty }(\Phi _{\mathcal {C}_1}^{\text {size}}(x))^k \\ &amp;= \frac {1}{1-\Phi _{\mathcal {C}_1}^{\text {size}}(x)} \\ &amp;= \frac {1}{1-\frac {x}{1-x}} \\ &amp;= \frac {1-x}{1-2x} \\ &amp;= 1 + x^2 + 2x^2 + 4x^3 + 8x^4 + \ldots  \end {align*}
</p><!-- l. 1074 --><p class='noindent'>From this we conclude that the number of compositions of size k is,
</p><!-- l. 1081 --><p class='noindent'>\begin {align*}  \begin {cases} 2^{k-1} \text { if } k \ge 1 \\ 1 \text { if } k = 0 \end {cases}  \end {align*}
</p><!-- l. 1084 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1086 --><p class='noindent'>Let \(g_n\) be the number of compositions of \(n\) into \(2\) or more parts using only the numbers \(1, 3,\) or \(7\). Find an expression for
\(\sum _{n=0}^{\infty }g_nx^n\).
</p><!-- l. 1089 --><p class='noindent'>For example,
</p><!-- l. 1091 --><p class='noindent'>Weight \(2 \rightarrow (1,1)\)
</p><!-- l. 1093 --><p class='noindent'>Weight \(3 \rightarrow (1,1,1)\)
</p><!-- l. 1095 --><p class='noindent'>Weight \(4 \rightarrow (1,3),(3,1),(1,1,1,1)\)
</p><!-- l. 1097 --><p class='noindent'>Let \(A\) be the set \(\{1,3,7\}.\) We will only be looking at \(A^2, A^3, A^4, \ldots \)
</p><!-- l. 1099 --><p class='noindent'>We see \(\Phi _{A}(x) = x^1 + x^3 + x^7\)
</p><!-- l. 1101 --><p class='noindent'>The generating series we are interested in is
</p><!-- l. 1106 --><p class='noindent'>\begin {align*}  \sum _{n=2}^{\infty }\Phi _{A^n}(x) &amp;= \sum _{n=2}^{\infty }(\Phi _{A}(x))^2  \end {align*}
</p><!-- l. 1108 --><p class='noindent'>Note \begin {align*}  \sum _{n=2}^{\infty }y^n = y^2\sum _{n=0}^{\infty }y^n = \frac {y^2}{1-y}  \end {align*}
</p><!-- l. 1113 --><p class='noindent'>This allows us to find the generating series we want as
</p><!-- l. 1117 --><p class='noindent'>\begin {align*}  \sum _{n=2}^{\infty }(\Phi _{A}(x))^n = \frac {(\Phi _{A}(x))^2}{1-\Phi _{A}(x)} = \frac {(x+x^3+x^7)^2}{1-x-x^3-x^7}  \end {align*}
</p><!-- l. 1119 --><p class='noindent'>Note
</p><!-- l. 1126 --><p class='noindent'>\begin {align*}  \Phi _{A}(x) &amp;= \sum _{a \in A}x^{(\omega (a))} \\ &amp;= \sum _{a \in \{1,3,7\}} x^{\omega (a)} \\ &amp;= x^{\omega (1)} + x^{\omega (3)} + x^{\omega (7)} \\ &amp;= x + x^3 + x^7  \end {align*}
</p><!-- l. 1128 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1130 --><p class='noindent'>Find the number of partitions of \(n\), using only odd numbers, into an odd number of parts. Find the generating
series.
</p><!-- l. 1132 --><p class='noindent'><span class='underline'>Examples</span>
</p><!-- l. 1134 --><p class='noindent'>\((1),(3),(5),(7)\)
</p><!-- l. 1136 --><p class='noindent'>\((1,1,1),(1,1,3),(1,3,1),(3,1,1),(1,3,3)\)
</p><!-- l. 1138 --><p class='noindent'>\((1,1,1,1,1)\)
</p><!-- l. 1140 --><p class='noindent'>As before it is useful to determine the generating series into exactly \(1\) part.
</p><!-- l. 1142 --><p class='noindent'>In this case, \(A = \{1,3,5,7,\ldots \}\)
</p><!-- l. 1144 --><p class='noindent'>So
</p><!-- l. 1148 --><p class='noindent'>\begin {align*}  \Phi _{A}(x) = \sum _{a \text { odd}}x^{\omega (a)} = \sum _{a \text { odd}} x + x^3 + x^5 + x^7 + \ldots  \end {align*}
</p><!-- l. 1150 --><p class='noindent'>Note
</p><!-- l. 1156 --><p class='noindent'>\begin {align*}  x + x^3 + x^5 + x^7 + \ldots \\ &amp;= x(1 + x^2 + x^4 + x^6 \ldots ) \\ &amp;= x(1+(x^2)^1 + (x^2)^2) + (x^2)^3) + \ldots )  \end {align*}
</p><!-- l. 1158 --><p class='noindent'>This gives us that
</p><!-- l. 1164 --><p class='noindent'>\begin {align*}  \Phi _{A}(x) &amp;= x + x^3 + x^5 \\ &amp;= x(1+(x^2)^1 + (x^2)^2 + \ldots ) \\ &amp;= \frac {x}{1-x^2}  \end {align*}
</p><!-- l. 1166 --><p class='noindent'>To find the generating series into an odd number of parts.
</p><!-- l. 1172 --><p class='noindent'>\begin {align*}  \sum _{n \text { odd}}\Phi _{A^n}(x) &amp;= \sum _{n \text { odd}}(\Phi _{A}(x))^n \\ &amp;= \frac {\Phi _{A}(x)}{1-\Phi _{A}(x)^2} = \frac {\frac {x}{1-x^2}}{1-(\frac {x}{1-x^2})^2} = \frac {x-x^3}{1-3x^4+x^4} \\ &amp;= x+2x^3 + 5x^5 + 13x^7 + 34x^9 + \ldots  \end {align*}
                                                                                      
                                                                                      
</p><!-- l. 1174 --><p class='noindent'>This last step is just to double check you didn’t make a mistake. If any coefficients are negative, you made
a mistake. If any of the small coefficients do not match up with an exhaustive set, you made a
mistake.
</p><!-- l. 1176 --><p class='noindent'>From the series there should be \(5\) compositions of \(5\) into an odd number of odd parts.
</p><!-- l. 1178 --><p class='noindent'>\((1,1,1,1,1)\)
</p><!-- l. 1180 --><p class='noindent'>\((1,1,3), (1,3,1), (3,1,1)\)
</p><!-- l. 1182 --><p class='noindent'>\((5)\)
</p><!-- l. 1185 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='binary-strings'><span class='titlemark'>3   </span> <a id='x1-130003'></a>Binary Strings</h3>
<!-- l. 1187 --><p class='noindent'><span class='underline'>Define</span>
</p><!-- l. 1189 --><p class='noindent'>A binary string is of the form \(a_1, a_2, \ldots , a_n\) where \(a_i \in \{0,1\}\)
</p><!-- l. 1191 --><p class='noindent'>\((000,10110,100000001,\ldots )\)
</p><!-- l. 1193 --><p class='noindent'>The <span class='underline'>length</span> of \(a_1 \ldots a_n\) is \(n\). We often use this as our weight function.
</p><!-- l. 1195 --><p class='noindent'>We use \(\epsilon \) to represent the empty string. (i.e. the string of length \(0\)).
</p><!-- l. 1197 --><p class='noindent'>If \(A = \{0,1\}\) is the binary strings of length \(1\), we use \(A^2 = \{00,01,10,11\}\)
</p><!-- l. 1199 --><p class='noindent'>(This is the same as \(\{(0,0),(0,1),(1,0),(1,1)\}\) from before but is easier to write).
</p><!-- l. 1201 --><p class='noindent'>As before
</p><!-- l. 1203 --><p class='noindent'>\(\{0,1\}^* = \bigcup _{k=0}^{\infty }\{0,1\}^k = \) set of all binary strings including \(\epsilon \).
</p><!-- l. 1206 --><p class='noindent'><span class='underline'>Example</span> Let \(B\) be the set of all binary strings. Then
</p><!-- l. 1212 --><p class='noindent'>\begin {align*}  \Phi _{B}^{\text {length}}(x) &amp;= \Phi _{\{0,1\}^*}^{\text {length}}(x) \\ &amp;= \sum _{k=0}^{\infty }\Phi _{\{0,1\}^k}(x) \\ &amp;= \sum _{k=0}^{\infty }(\Phi _{\{0,1\}}(x))^k  \end {align*}
</p><!-- l. 1214 --><p class='noindent'>Here,
</p><!-- l. 1218 --><p class='noindent'>\begin {align*}  \Phi _{\{0,1\}}^{\text {length}}(x) = x^{\text {length}(0)} + x^{\text {length}(1)} = x + x = 2x  \end {align*}
</p><!-- l. 1220 --><p class='noindent'>This gives,
</p><!-- l. 1224 --><p class='noindent'>\begin {align*}  \Phi _{B}^{\text {length}}(x) = \frac {1}{1-2x} = 1 + 2x + 4x^2 + 8x^3 + 16x^4 + \ldots  \end {align*}
</p><!-- l. 1226 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='regular-expressions-rational-languages'><span class='titlemark'>3.1   </span> <a id='x1-140003.1'></a>Regular Expressions &amp; Rational Languages</h4>
<!-- l. 1228 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 1230 --><p class='noindent'>(Note: This is also discussed in CS360, CS365)
</p><!-- l. 1232 --><p class='noindent'>\(\epsilon ,0,1\) are all regular expressions.
</p><!-- l. 1234 --><p class='noindent'>If \(R\) and \(S\) are regular expressions, then so is \(R \smile S\). This can be read as "or".
</p><!-- l. 1236 --><p class='noindent'>If \(R\) and \(S\) are regular expressions, then so is \(RS\).
</p><!-- l. 1238 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1240 --><p class='noindent'>\(0,1\) are regular expressions. Hence \(00\) is a regular expression as is \(10\). Hence so is \(00 \smile 11\). This represents the binary strings
\(\{00,10\}\).
</p><!-- l. 1242 --><p class='noindent'>Hence so is \((00 \smile 10)(00 \smile 10)\)
                                                                                      
                                                                                      
</p><!-- l. 1244 --><p class='noindent'>This gives \(\{0000,0010,1000,1010\}\) as the words represented.
</p><!-- l. 1246 --><p class='noindent'>If \(R\) is a regular expression, so is \(R^k\) for \(k \ge 0\). This is \(R^k = \underbrace {RR \ldots R}_{\text {k times}}\)
</p><!-- l. 1248 --><p class='noindent'>If \(R\) is a regular expression, so is \(R^*\)
</p><!-- l. 1250 --><p class='noindent'>Here \(R^* = \underbrace {\epsilon \smile R^1 \smile R^2 \smile R^3 \smile R^4 \smile \ldots }_{\text {forever}}\)
</p><!-- l. 1252 --><p class='noindent'><span class='underline'>Recall</span>
</p><!-- l. 1254 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 1256 --><p class='noindent'>Let \(R\) and \(S\) be regular expressions.
</p>
     <ul class='itemize1'>
     <li class='itemize'>\(\epsilon , 0, 1\) are regular expressions
     </li>
     <li class='itemize'>\(R \smile S\) is a regular expression
     </li>
     <li class='itemize'>\(RS\) is a regular expression
     </li>
     <li class='itemize'>\(R^k = \underbrace {RR\ldots R}_{k}\) is a regular expression
     </li>
     <li class='itemize'>\(R^* = \epsilon \smile R \smile R^2 \ldots \) is a regular expression</li></ul>
<!-- l. 1266 --><p class='noindent'><span class='underline'>Example</span> Consider \((0(00\smile 11)^2)^*\)
</p><!-- l. 1268 --><p class='noindent'>This is a regular expression, but what does it mean?
</p><!-- l. 1270 --><p class='noindent'>We see \(\epsilon \) is a word described by this regular expression
</p><!-- l. 1272 --><p class='noindent'>\(0.00.00, 0.00.11, 0.11.00, 0.11.11\) are all words given by the regular expression \(0(00\smile 11)^2\), and hence given by this regular expression
</p><!-- l. 1274 --><p class='noindent'><span class='underline'>Notice</span>
</p><!-- l. 1276 --><p class='noindent'>\(0(00\smile 11)^2 = 0(00\smile 11)(00\smile 11)\)
</p><!-- l. 1278 --><p class='noindent'>We also have \(16\) words of length \(10\) given by this expression. This comes from \((0(00\smile 11)^2)^2\)
</p><!-- l. 1280 --><p class='noindent'>Note \((0(00\smile 11)^2)^2 = 0(00\smile 11)^20(00\smile 11)^2 = 0(00\smile 11)(00\smile 11)0(00\smile 11)(00\smile 11)\)
</p><!-- l. 1282 --><p class='noindent'>This includes
</p><!-- l. 1284 --><p class='noindent'>\(0.00.00.0.00.00\) <br class='newline' />\(0.00.11.0.11.11\) <br class='newline' />\(0.11.00.0.11.0.0\) etc.
</p><!-- l. 1288 --><p class='noindent'>There are \(13\) more that are not listed.
</p><!-- l. 1290 --><p class='noindent'>Often for regular expressions, we wish to count the number of binary strings represented by this expression of a
particular length.
</p><!-- l. 1292 --><p class='noindent'>In this case there is one word of length \(0\), (namely \(\epsilon \))
</p><!-- l. 1294 --><p class='noindent'>There are \(4\) words of length \(5\)
</p><!-- l. 1296 --><p class='noindent'>There are \(4^2\) words of length \(10\)
                                                                                      
                                                                                      
</p><!-- l. 1298 --><p class='noindent'>In this case we can create a generating series \(\sum {}{}a_nx^n\) where \(a_n = \#\) of binary strings of length \(n\) given by the regular
expression.
</p><!-- l. 1300 --><p class='noindent'>We have in this case that
</p><!-- l. 1306 --><p class='noindent'>\begin {align*}  \sum _{n=0}^{\infty } &amp;= 1 + 4x^5 + 16x^{10} = 4^3x^{15} + \ldots \\ &amp;= 1 + 4x^5 + (4x^5)^2 + (4x^5)^3 \\ &amp;= \frac {1}{1-4x^5}  \end {align*}
</p><!-- l. 1308 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 1310 --><p class='noindent'>Let \(\mathcal {R}\) and \(\mathcal {S}\) be sets of binary strings. We denote \(\mathcal {RS} = \{\alpha \beta : \alpha \in \mathcal {R}, \beta \in \mathcal {S}\}\)
</p><!-- l. 1312 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1314 --><p class='noindent'>\(\mathcal {R} = \{0,00,000,0000,\ldots \} = \) all non-empty binary strings with only \(0\)
</p><!-- l. 1316 --><p class='noindent'>\(\mathcal {S} = \{1,11,111\}\)
</p><!-- l. 1318 --><p class='noindent'>\(\mathcal {RS} = \{01,011,0111,001,0011,0011,\ldots \}\)
</p><!-- l. 1320 --><p class='noindent'>\(\mathcal {SR} = \{10,110,1110,100,1100,11100,\ldots \}\)
</p><!-- l. 1322 --><p class='noindent'>\(\mathcal {RR} = \{00,000,0000,\ldots \} = R \setminus \{0\}\)
</p><!-- l. 1324 --><p class='noindent'>\(\mathcal {SS} = \{11,111,1111,11111,111111\}\)
</p><!-- l. 1326 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 1328 --><p class='noindent'>Let \(R\) be a regular expression representing the words \(\mathcal {R}\).
</p><!-- l. 1330 --><p class='noindent'>Let \(S\) be a regular expression representing the binary strings \(\mathcal {S}\).
</p><!-- l. 1332 --><p class='noindent'>The \(\epsilon , 0, 1\) are regular expressions representing the set \(\{\epsilon \}, \{0\},\{1\}\) respectively.
</p><!-- l. 1334 --><p class='noindent'>Then \(R \smile S\) is a regular expression representing the strings \(\mathcal {R} \cup \mathcal {S}\).
</p><!-- l. 1336 --><p class='noindent'>Then \(RS\) is a regular expression representing the strings \(\mathcal {RS}\).
</p><!-- l. 1338 --><p class='noindent'>Then \(R^k = \underbrace {R...R}_{k}\) is a regular expression representing the language \(\underbrace {\mathcal {R}\ldots \mathcal {R}}_{k} = \{\alpha _1, \ldots , \alpha _k : \alpha _i \in \mathcal {R}\} = \mathcal {R}^k\)
</p><!-- l. 1340 --><p class='noindent'>\(R^* = \epsilon \smile R \smile R^2 \smile R^3 \smile \ldots \) is a regular expression for the set of strings \(\mathcal {R}^* = \{\epsilon \} \cup \mathcal {R} \cup \mathcal {R}^2 \cup \mathcal {R}^3 \cup \ldots = \bigcup _{k=0}^{\infty }\mathcal {R}^k\)
</p><!-- l. 1342 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 1344 --><p class='noindent'>Let \(R\) be a regular expression. Then \(\mathcal {R}\), the set of binary strings represented by \(R\) is called a rational language (or a
regular language).
</p><!-- l. 1346 --><p class='noindent'><span class='underline'>Note</span>
</p><!-- l. 1348 --><p class='noindent'>Not all subsets of binary strings are rational languages. For example, \(\{0^n,1^n\}_{n=0}^{\infty } = \{\epsilon , 01,0011,000111,\ldots \}\) is not a rational language.
</p><!-- l. 1350 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1352 --><p class='noindent'>\(\{0^p\}_{\text {p-prime}} = \{00,000,00000,\ldots \}\) is not a rational language.
</p><!-- l. 1354 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1356 --><p class='noindent'>Any finite set \(\mathcal {R}\) is a rational language.
</p><!-- l. 1358 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='ambiguous-vs-unambiguous'><span class='titlemark'>3.2   </span> <a id='x1-150003.2'></a>Ambiguous vs Unambiguous</h4>
<!-- l. 1360 --><p class='noindent'>Consider the two regular expressions.
</p><!-- l. 1362 --><p class='noindent'>\((1\smile 11)^*\) and \(1^*\). These both give the rational language \(\{\epsilon , 1, 11, 111, 1111,\ldots \}\)
</p><!-- l. 1364 --><p class='noindent'>We see that \((1\smile 11)^*\) represents \(111\) in three different ways. We have
</p><!-- l. 1366 --><p class='noindent'>\(1.1.1\) or \(1.11\), \(11.1\)
</p><!-- l. 1368 --><p class='noindent'>We see \(1^*\) has only one way to do this. Namely \(1.1.1\).
                                                                                      
                                                                                      
</p><!-- l. 1370 --><p class='noindent'>Ambiguous &amp; Unambiguous Expressions
</p><!-- l. 1372 --><p class='noindent'><span class='underline'>Definition</span>
</p><!-- l. 1374 --><p class='noindent'>We say a regular expression is unambiguous if <span class='underline'>every</span> string in the rational language is uniquely given by a
unique representation. We say a regular expression is ambiguous if it is not ambiguous. Equivalently, there is at
least one word in the language with at least two representations.
</p><!-- l. 1376 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1378 --><p class='noindent'>\((1\smile 0)(00\smile 0)\)
</p><!-- l. 1380 --><p class='noindent'>This is ambiguous. Notice
</p><!-- l. 1382 --><p class='noindent'>\(00 = 0.0 = \epsilon .00\)
</p><!-- l. 1384 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1386 --><p class='noindent'>\(1^*(00\smile 0)\)
</p><!-- l. 1388 --><p class='noindent'>We see that a word starts with some number of \(1\)s, that is described uniquely by \(1^*\), and ends with \(0\) or \(00\), which
again is unique.
</p><!-- l. 1390 --><p class='noindent'>This example is unambiguous.
</p><!-- l. 1392 --><p class='noindent'><span class='underline'>Lemma</span>
</p><!-- l. 1394 --><p class='noindent'>Let \(R\) and \(S\) be regular expressions which are unambiguous.
</p><!-- l. 1396 --><p class='noindent'>Let their rational languages be \(\mathcal {R}\) and \(\mathcal {S}\)
</p><!-- l. 1398 --><p class='noindent'>Then \(\epsilon , 0, 1\) are all unambiguous
</p><!-- l. 1400 --><p class='noindent'>The regular expression \(R \cup S\) is unambiguous if and only if \(\mathcal {R} \cap \mathcal {S} = \emptyset \)
</p><!-- l. 1402 --><p class='noindent'>The regular expression \(RS\) is unambiguous if and only if there is a bijection from \(\mathcal {RS}\) to \(\mathcal {R} \times \mathcal {S}\)
</p><!-- l. 1404 --><p class='noindent'>I.e. for every \(\alpha \in \mathcal {RS}\), there is a unique \(r \in \mathcal {R}\) and \(s \in \mathcal {S}\) such that \(\alpha = rs\)
</p><!-- l. 1406 --><p class='noindent'>\(R^*\) is unambiguous if and only if \(R^k\) is unambiguous for all \(k\) and \(R^k \cap R^n = \emptyset \) for all \(k \ne n\)
</p><!-- l. 1408 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1410 --><p class='noindent'>\((\epsilon \smile 0)(0 \smile 00)\)
</p><!-- l. 1412 --><p class='noindent'>Notice \((\epsilon \smile 0)\) is unambiguous as \(\{\epsilon \} \cap \{0\} = \emptyset \). This has language \(\{\epsilon , 0\}\)
</p><!-- l. 1414 --><p class='noindent'>Similarly, \(0\smile 00\) is an unambiguous expression for \(\{0,00\}\)
</p><!-- l. 1416 --><p class='noindent'>Consider \((\epsilon \smile 0)(0 \smile 00)\)
</p><!-- l. 1418 --><p class='noindent'>\(\{\epsilon , 0\}\{0,00\} = \{\epsilon .0, \epsilon .00, 0.0,0.00\} = \{0,00,000\}\)
</p><!-- l. 1421 --><p class='noindent'>\(\{\epsilon , 0\} \times \{0,00\} = \{(\epsilon ,0),(\epsilon ,00),(0,0),(0,00)\}\)
</p><!-- l. 1423 --><p class='noindent'>In this case \(\{\epsilon ,0\}\{0,00\}\) is size \(3\) and \(\{\epsilon ,0\} \times \{0,00\}\) is size \(4\).
</p><!-- l. 1425 --><p class='noindent'>Hence there does not exist a bijection, and \((\epsilon \smile 0)(0 \smile 00)\) is ambiguous.
</p><!-- l. 1427 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 1429 --><p class='noindent'>Let \(R\) and \(S\) be unambiguous expressions with languages \(\mathcal {R}\) and \(\mathcal {S}\) and generating series \(\Phi _{\mathcal {R}}, \Phi _{\mathcal {S}}\) (with weight function \(=\) length
of binary string).
</p><!-- l. 1431 --><p class='noindent'>\(\epsilon , 0, 1\) are unambiguous regular expressions with languages \(\{\epsilon \}, \{0\},\{1\},\) and generating series \(\Phi _{\{\epsilon \}}(x) = x^{\text {length}(\epsilon )} = x^0 = 1\)
</p><!-- l. 1433 --><p class='noindent'>\(\Phi _{\{0\}}(x) = x^\text {length}(0) = x^1 = x. \Phi _{\{1\}}(x) = x^\text {length}(1) = x^1 = x\)
</p><!-- l. 1435 --><p class='noindent'><span class='underline'>Sum Lemma</span>
</p><!-- l. 1437 --><p class='noindent'>Assume \(R \smile S\) is unambiguous, and is associated to the language \(\mathcal {R} \cup \mathcal {S}\). Further
</p><!-- l. 1441 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {R} \cup \mathcal {S}}(x) = \Phi _{\mathcal {R}}(x) + \Phi _{\mathcal {S}}(x)  \end {align*}
</p><!-- l. 1443 --><p class='noindent'><span class='underline'>Product Lemma</span>
                                                                                      
                                                                                      
</p><!-- l. 1445 --><p class='noindent'>Assume \(RS\) is an unambiguous expression for \(\mathcal {RS}\) (which has a bijection to \(\mathcal {R} \times \mathcal {S}\)). Further
</p><!-- l. 1449 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {RS}}(x) = \Phi _{\mathcal {R} \times \mathcal {S}}(x) = \Phi _{\mathcal {R}}(x) \cdot \Phi _{\mathcal {S}}(x)  \end {align*}
</p><!-- l. 1452 --><p class='noindent'><span class='underline'>String Lemma</span>
</p><!-- l. 1454 --><p class='noindent'>Assume \(R^*\) is unambiguous with language \(R^*\). Then
</p><!-- l. 1458 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {R}^*}(x) = \frac {1}{1-\Phi _{\mathcal {R}}(x)}  \end {align*}
</p><!-- l. 1460 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1462 --><p class='noindent'>The regular expression \(0^*(100^*)^*(\epsilon \smile 1)\) is unambiguous.
</p><!-- l. 1464 --><p class='noindent'>Let \(\mathcal {S}\) be the language represented by this expression. Find \(\Phi _{\mathcal {S}}(x)\)
</p><!-- l. 1466 --><p class='noindent'>\(0\) has generating series \(\Phi _{\{0\}}(x) = x\)
</p><!-- l. 1468 --><p class='noindent'>\(0^*\) has generating series \(\Phi _{\{0\}^*}(x) = \frac {1}{1-\Phi _{\{0\}}(x)} = \frac {1}{1-x}\)
</p><!-- l. 1470 --><p class='noindent'>Next
</p><!-- l. 1476 --><p class='noindent'>\begin {align*}  \Phi _{\{10\}\{0\}^*}(x) &amp;= \Phi _{\{1\}}(x) \cdot \Phi _{\{0\}}(x) \cdot \Phi _{\{0\}^*}(x) \\ &amp;= x \cdot x \cdot (\frac {1}{1-x}) \\ &amp;= \frac {x^2}{1-x}  \end {align*}
</p><!-- l. 1478 --><p class='noindent'>This gives the generating series associated to \((100^*)^*\) as
</p><!-- l. 1482 --><p class='noindent'>\begin {align*}  \frac {1}{1-\Phi _{\{10\}\{0\}^*}(x)} = \frac {1}{1-\frac {x^2}{1-x}}  \end {align*}
</p><!-- l. 1484 --><p class='noindent'>Lastly \(\Phi _{\{\epsilon ,1\}}(x) = \Phi _{\{\epsilon \}}(x) + \Phi _{\{1\}}(x) = 1 + x\)
</p><!-- l. 1486 --><p class='noindent'>Hence
</p><!-- l. 1491 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {S}}(x) &amp;= \frac {1}{1-x} \cdot \frac {1}{1-\frac {x^2}{1-x}} \cdot (1+x) \\ &amp;= \frac {1+x}{1-x-x^2}  \end {align*}
</p><!-- l. 1493 --><p class='noindent'><span class='underline'>Note</span>
</p><!-- l. 1495 --><p class='noindent'>We can do this on ambiguous expressions, but the coefficients can include over-counts and be too
high.
</p><!-- l. 1498 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='block-prefix-decomposition'><span class='titlemark'>3.3   </span> <a id='x1-160003.3'></a>Block &amp; Prefix Decomposition</h4>
<!-- l. 1500 --><p class='noindent'>We see that having an unambiguous regular expression allows us to construct a generating series for the
language with respect to the length.
</p><!-- l. 1502 --><p class='noindent'>One way to do this is to decompose the strings in an unambiguous way, and construct the regular expression for
this.
</p><!-- l. 1504 --><p class='noindent'><span class='underline'>Block Decomposition</span>
</p><!-- l. 1506 --><p class='noindent'>We will decompose a string into alternating "blocks" of 0’s and 1’s.
</p><!-- l. 1508 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1510 --><p class='noindent'>\(11010001110101\)
</p><!-- l. 1512 --><p class='noindent'>\(11.0.1.000.111.0.1.0.1\)
</p><!-- l. 1514 --><p class='noindent'>A non-empty block of \(0\)’s can be represented by \(00^*\). A non-empty block of \(1\)’s can be represented by
\(11^*\).
</p><!-- l. 1517 --><p class='noindent'>If we alternate these, we could have, for example,
</p><!-- l. 1519 --><p class='noindent'>\(00^*11^*00^*11^*00^*\)
</p><!-- l. 1521 --><p class='noindent'>We can represent all binary strings by the unambiguous block decompositions
</p><!-- l. 1523 --><p class='noindent'>\(1^*(00^*11^*)^*0^*\)
</p><!-- l. 1525 --><p class='noindent'>or
                                                                                      
                                                                                      
</p><!-- l. 1527 --><p class='noindent'>\(0^*(11^*00^*)^*1^*\)
</p><!-- l. 1529 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1531 --><p class='noindent'>Find a regular expression (unambiguous) where all blocks of 0 even length can be represented.
</p><!-- l. 1533 --><p class='noindent'>Notice a non-empty block of \(0\)’s of even length can be represented by
</p><!-- l. 1535 --><p class='noindent'>\(00(00)^*\). If we also wanted to allow an empty block, we can use \((00)^*\)
</p><!-- l. 1537 --><p class='noindent'>Binary Strings \(1^*(00^*11^*)^*0^*\)
</p><!-- l. 1539 --><p class='noindent'>New Set \(1^*(\underbrace {00(00)^*}_{\text {even length, non-empty}}11^*)^*\underbrace {(00)^*}_{\text {even length, possibly empty}}\)
</p><!-- l. 1541 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1543 --><p class='noindent'>All blocks are odd length
</p><!-- l. 1545 --><p class='noindent'>Blocks of 1’s, possibly empty, of odd length
</p><!-- l. 1547 --><p class='noindent'>\(\epsilon \smile 1(11)^*\)
</p><!-- l. 1549 --><p class='noindent'>Blocks of 0’s, non-empty, odd length
</p><!-- l. 1551 --><p class='noindent'>\(0(00)^*\)
</p><!-- l. 1553 --><p class='noindent'>Blocks of 1’s, non-empty, odd length
</p><!-- l. 1555 --><p class='noindent'>\(1(11)^*\)
</p><!-- l. 1557 --><p class='noindent'>Block of 0’s, possibly empty, odd length
</p><!-- l. 1559 --><p class='noindent'>\((\epsilon \smile 0(00)^*\)
</p><!-- l. 1561 --><p class='noindent'>All binary strings
</p><!-- l. 1563 --><p class='noindent'>\(1^*(00^*11^*)^*0^*\)
</p><!-- l. 1565 --><p class='noindent'>\((\epsilon \smile 1(11)^*)(0(00)^*1(11)^*)^*(\epsilon \smile 0(00)^*)\)
</p><!-- l. 1567 --><p class='noindent'>New expression
</p><!-- l. 1569 --><p class='noindent'>Another common type of decomposition is called prefix decomposition.
</p><!-- l. 1571 --><p class='noindent'><span class='underline'>Prefix Decomposition</span>
</p><!-- l. 1574 --><p class='noindent'>The idea is every part starts with 1 and every 1 starts a part.
</p><!-- l. 1576 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1578 --><p class='noindent'>\(00110001001101\)
</p><!-- l. 1580 --><p class='noindent'>\(00.1.1000.100.1.10.1\)
</p><!-- l. 1582 --><p class='noindent'>Every part looks like \(10^*\). We need to allow the word to start with some number of 0’s.
</p><!-- l. 1584 --><p class='noindent'>This gives us a decomposition of \(0^*(10^*)^*\)
</p><!-- l. 1586 --><p class='noindent'>(Note, we could decompose based on 0’s, or based on suffixes).
</p><!-- l. 1588 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1590 --><p class='noindent'>Find an unambiguous regular expression where every 1 is followed by at least two 0’s.
</p><!-- l. 1592 --><p class='noindent'>Here \(10^*\) is a 1 followed by any number of 0’s. We can modify this to give \(1000^*\), where every 1 is followed by at least two
0’s.
</p><!-- l. 1594 --><p class='noindent'>All binary strings \(0^*(10^*)^*\)
</p><!-- l. 1596 --><p class='noindent'>New expression \(0^*(1000^*)^*\)
</p><!-- l. 1598 --><p class='noindent'><span class='underline'>Aside</span>
</p><!-- l. 1600 --><p class='noindent'>There are multiple ways to represent all binary strings. The easiest, but least useful is \((0 \smile 1)^*\).
</p><!-- l. 1602 --><p class='noindent'><span class='underline'>Example</span>
                                                                                      
                                                                                      
</p><!-- l. 1604 --><p class='noindent'>We have an unambiguous regular expression for all words where 1 is followed by at least two 0’s. Let this
language by \(\mathcal {R}\). Find \(\Phi _{\mathcal {R}}(x)\).
</p><!-- l. 1606 --><p class='noindent'>Here the regular expression is \(0^*(1000^*)^*\)
</p><!-- l. 1608 --><p class='noindent'>Notice the generating series for the part coming from \(0^*\) is \(\frac {1}{1-x}\)
</p><!-- l. 1610 --><p class='noindent'>The generating series corresponding to \(1000^*\) is \(\frac {x^3}{1-x}\).
</p><!-- l. 1612 --><p class='noindent'>Putting this together gives \((\frac {1}{1-x})(\frac {1}{1-\frac {x^3}{1-x}})\)
</p><!-- l. 1614 --><p class='noindent'>This can be simplified to the form \(\frac {\text {polynomial}}{\text {polynomial}}\).
</p><!-- l. 1617 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='recursive-decomposition'><span class='titlemark'>3.4   </span> <a id='x1-170003.4'></a>Recursive Decomposition</h4>
<!-- l. 1619 --><p class='noindent'><span class='underline'>Recursive Decomposition</span>
</p><!-- l. 1621 --><p class='noindent'>Another way we can describe a language is recursively. It is possible that such a language is <span class='underline'>not</span> a rational
language. Despite this, we can often still use this decomposition to say something meaningful about the
language via generating series.
</p><!-- l. 1623 --><p class='noindent'>We need this decomposition to be unambiguous for this to work.
</p><!-- l. 1625 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1627 --><p class='noindent'>Let \(\mathcal {S}\) be the set of binary strings where all blocks of 1’s are even, and all blocks of 0’s are of length divisible by
3.
</p><!-- l. 1629 --><p class='noindent'>For any word in \(\mathcal {S}\), either it is \(\epsilon \), or it starts with 0, or it starts with 1. As all blocks of 0 have length divisible by 3,
if it starts with 0, then it has to start with \(000\). Similarly, if it starts with 1, it in fact starts with
\(11\).
</p><!-- l. 1631 --><p class='noindent'>Here if \(S\) is the "regular expression", then we have
</p><!-- l. 1633 --><p class='noindent'>\(S = (\epsilon \smile 11S \smile 000S)\)
</p><!-- l. 1635 --><p class='noindent'>This allows us to say something about the generating series.
</p><!-- l. 1641 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {S}}(x) &amp;= \Phi _{\{\epsilon \}}(x) + \Phi _{\{11\}}(x) \Phi _{\{\mathcal {S}\}}(x) + \Phi _{\{000\}}(x) + \Phi _{\{\mathcal {S}\}}(x) \\ &amp;= 1 + x^2 \cdot \Phi _{\mathcal {S}}(x) + x^3 \cdot \Phi _{\mathcal {S}}(x) \\ &amp;\implies \Phi _{\mathcal {S}}(x) - x^2 \Phi _{\mathcal {S}}(x) - x^3\Phi _{\mathcal {S}}(x) = 1  \end {align*}
</p><!-- l. 1643 --><p class='noindent'>Hence
</p><!-- l. 1648 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {S}}(x)(1-x^2-x^3) = 1 \text { or} \\ \Phi _{\mathcal {S}}(x) = \frac {1}{1-x^2-x^3}  \end {align*}
</p><!-- l. 1650 --><p class='noindent'><span class='underline'>Note</span>
</p><!-- l. 1652 --><p class='noindent'>This language is in fact rational, and has block decomposition
</p><!-- l. 1654 --><p class='noindent'>\((11)^*(000(000)^*(11)(11)^*)^*(000)^*\)
</p><!-- l. 1656 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1658 --><p class='noindent'>Let \(\mathcal {R} = \{0^n1^n\}_{n=0}^{\infty } = \{\epsilon , 01, 0011, 000111,\ldots \}\)
</p><!-- l. 1660 --><p class='noindent'>We see \(\mathcal {R}\) is either empty, \(\epsilon \), or it starts with a 0 and ends with a 1, and the middle part (after removing the first
and last term) is in \(\mathcal {R}\).
</p><!-- l. 1662 --><p class='noindent'>This gives us \(R = 0R1 \smile \epsilon \)
</p><!-- l. 1664 --><p class='noindent'>Hence the generating series looks like
</p><!-- l. 1671 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {R}}(x) &amp;= \Phi _{\{\epsilon \}}(x) + \Phi _{\{0\}}(x) \Phi _{\{\mathcal {R}\}}(x) \Phi _{\{1\}}(x) \\ &amp;\implies \Phi _{\mathcal {R}}(x) = 1 + x \Phi _{\mathcal {R}}(x)x \\ &amp;\implies \Phi _{\mathcal {R}}(x)(1-x^2) = 1 \\ &amp;\implies \Phi _{\mathcal {R}}(x) = \frac {1}{1-x^2} = 1 + x^2 + x^4 + x^6 + \ldots  \end {align*}
</p><!-- l. 1673 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1675 --><p class='noindent'>Let \(\mathcal {R}\) be the language that does not contain \(001\). It is useful to define \(\mathcal {S}\) as the language that contains \(001\) exactly once, at
the very end. Let \(R\) and \(S\) be their expressions.
                                                                                      
                                                                                      
</p><!-- l. 1677 --><p class='noindent'>Notice \(\mathcal {R} \cap \mathcal {S} = \emptyset \)
</p><!-- l. 1679 --><p class='noindent'>Consider \(R \cup S\).
</p><!-- l. 1681 --><p class='noindent'>This is either \(\epsilon \), or ends in 0, or ends in 1.
</p><!-- l. 1683 --><p class='noindent'>If it ends in 0, and we remove the final 0, then it will still not contain \(001\) (i.e. it is in \(\mathcal {R})\)
</p><!-- l. 1685 --><p class='noindent'>If it ends in 1, and we remove the final 1, then it will not contain \(001\) and hence is in \(\mathcal {R}\).
</p><!-- l. 1687 --><p class='noindent'>This gives \(R \smile S = \epsilon \smile R0 \smile R1\)
</p><!-- l. 1693 --><p class='noindent'>\begin {align*}  \implies \Phi _{\mathcal {R}}(x) + \Phi _{\mathcal {S}}(x) &amp;= \Phi _{\{\epsilon \}}(x) + \Phi _{\mathcal {R}}(x) \Phi _{\{0\}}(x) + \Phi _{\mathcal {r}}(x) \Phi _{\{1\}}(x) \\ &amp;= 1 + \Phi _{\mathcal {R}} \cdot x + \Phi _{\mathcal {R}}(x) \cdot x \\ &amp;= 1 + 2x \Phi _{\mathcal {R}}(x)  \end {align*}
</p><!-- l. 1695 --><p class='noindent'>Consider a word \(r_1r_2 \ldots r_n001\) represented by \(S\). This cannot contain a \(001\) anywhere in \(r_1r_2 \ldots r_n00\) by assumption.
</p><!-- l. 1697 --><p class='noindent'>As \(00\) at the end cannot create a \(001\), we see \(r_1r_2 \ldots r_n00\) does not contain a \(001\) if and only if \(r_1r_2 \ldots r_n\) does not contain a
\(001\).
</p><!-- l. 1699 --><p class='noindent'>This gives us \(S = R001\)
</p><!-- l. 1701 --><p class='noindent'>Hence \(\Phi _{\mathcal {S}}(x) = x^3\Phi _{\mathcal {R}}(x)\)
</p><!-- l. 1703 --><p class='noindent'>Combining the two equations gives
</p><!-- l. 1708 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {R}}(x) + x^3\Phi _{\mathcal {R}}(x) - 2x\Phi _{\mathcal {R}}(x) = 1 \\ \implies \Phi _{\mathcal {R}}(x) = \frac {1}{1-2x+x^3}  \end {align*}
</p><!-- l. 1710 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1712 --><p class='noindent'>Same as before, except use \(000\) instead of \(001\).
</p><!-- l. 1714 --><p class='noindent'>As before we have
</p><!-- l. 1718 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {R}}(x) + \Phi _{\mathcal {S}}(x) = 1 + 2x \Phi _{\mathcal {R}}(x)  \end {align*}
</p><!-- l. 1720 --><p class='noindent'>The problem occurs when we try to do something like \(S = R001\).
</p><!-- l. 1722 --><p class='noindent'>Consider \(00 \in \mathcal {R}\)
</p><!-- l. 1724 --><p class='noindent'>We see \(00.000 \notin \mathcal {S}\)
</p><!-- l. 1726 --><p class='noindent'>We see \(\underline {000}00, 0\underline {000}0,00\underline {000}\) has multiple occurrences of \(000\), two of them not at the end.
</p><!-- l. 1728 --><p class='noindent'>If \(r_1 \ldots r_n = r_1r_2 \ldots r_{n-2}00 \in \mathcal {R}\)
</p><!-- l. 1730 --><p class='noindent'>Then \(r_1r_2 \ldots r_n 000 = \underbrace {(r_1r_2 \ldots r_{n-2}000)}_{\in \mathcal {S}}(00) \in \mathcal {S}(00)\)
</p><!-- l. 1732 --><p class='noindent'>If \(r_1r_2 \ldots r_n = r_1r_2 \ldots r_{n-1}0 \in \mathcal {R}\)
</p><!-- l. 1734 --><p class='noindent'>\(\implies r_1r_2 \ldots r_{n-1}0000 = (\underbrace {r_1r_2 \ldots r_{n-1}000}_{\in \mathcal {S}})(0) \in \mathcal {S}0\)
</p><!-- l. 1736 --><p class='noindent'>This gives
</p><!-- l. 1738 --><p class='noindent'>\(S \smile S0 \smile S00 = R000\)
</p><!-- l. 1744 --><p class='noindent'>\begin {align*}  &amp;\implies \Phi _{\mathcal {S}}(x)(1+x+x^2) = x^3 \Phi _{\mathcal {R}}(x) \\ &amp;\implies \Phi _{\mathcal {R}}(x) + \frac {x^3}{1+x+x^2} \Phi _{\mathcal {R}}(x) = 1 + 2x \Phi _{\mathcal {R}}(x) \\ &amp;\implies \Phi _{\mathcal {R}}(x) = \frac {1+x^2+x^3}{1-x-x^2-x^3}  \end {align*}
</p><!-- l. 1746 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='excluded-substrings'><span class='titlemark'>3.5   </span> <a id='x1-180003.5'></a>Excluded Substrings</h4>
<!-- l. 1748 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 1750 --><p class='noindent'>Let \(\kappa \in \{0,1\}^*\) be a non-empty binary string of length \(n\). Let \(\mathcal {C}\) be the collection of non-empty suffixes \(\gamma \) of \(\kappa \) such that there
exists a \(n\kappa = \kappa \gamma \).
</p><!-- l. 1752 --><p class='noindent'>Let \(C(x) = \sum _{\gamma \in \mathcal {C}} x^{\ell (\gamma )}\)
</p><!-- l. 1754 --><p class='noindent'>Then the generating series for the language of binary strings not containing \(\kappa \) is
</p><!-- l. 1758 --><p class='noindent'>\begin {align*}  \Phi (x) = \frac {1 + C(x)}{(1-2x)(1+C(x))+x^n}  \end {align*}
                                                                                      
                                                                                      
</p><!-- l. 1760 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1762 --><p class='noindent'>Let \(k=000. n= \ell (000) = \ell (\kappa ) = 3\)
</p><!-- l. 1764 --><p class='noindent'>Notice the suffixes of \(\kappa \) are \(00\) and \(0\). In this case
</p><!-- l. 1766 --><p class='noindent'>\(0.000 = 000.0\).
</p><!-- l. 1768 --><p class='noindent'>\(00.000 = 000.00\)
</p><!-- l. 1770 --><p class='noindent'>In this case \(\mathcal {C} = \{0,00\}\)
</p><!-- l. 1772 --><p class='noindent'>This gives \(C(x) = x^{\ell (0)} + x^{\ell (00)} = x + x^2\)
</p><!-- l. 1774 --><p class='noindent'>This gives
</p><!-- l. 1779 --><p class='noindent'>\begin {align*}  \Phi (x) &amp;= \frac {1+x+x^2}{(1-2x)(1+x+x^2)+x^3} \\ &amp;= \frac {1+x+x^2}{1-x-x^2-x^3}  \end {align*}
</p><!-- l. 1781 --><p class='noindent'>Why does this work?
</p><!-- l. 1783 --><p class='noindent'>In the original method we always have
</p><!-- l. 1785 --><p class='noindent'>\(R \smile S = \epsilon \smile R0 \smile R1\)
</p><!-- l. 1787 --><p class='noindent'>(\(R\)-language avoiding \(\kappa \). \(R\)-language containing exactly one \(\kappa \) at the end).
</p><!-- l. 1789 --><p class='noindent'>The second relationship depends on \(\mathcal {C}\). Let \(\mathcal {C} = \{\gamma _1, \ldots , \gamma _{\kappa }\}\)
</p><!-- l. 1791 --><p class='noindent'>We get a new relation
</p><!-- l. 1795 --><p class='noindent'>\begin {align*}  R\kappa = S \smile S\gamma _1 \smile S\gamma _2 \smile \ldots \smile S\gamma _{\kappa }  \end {align*}
</p><!-- l. 1797 --><p class='noindent'>From these two relations we get the generating series
</p><!-- l. 1801 --><p class='noindent'>\begin {align*}  \Phi _{\mathcal {R}}(x) + \Phi _{\mathcal {S}}(x) = 1 + 2x \Phi _{\mathcal {R}}(x)  \end {align*}
</p><!-- l. 1803 --><p class='noindent'>and
</p><!-- l. 1808 --><p class='noindent'>\begin {align*}  x^n \Phi _{\mathcal {R}}(x) &amp;= \Phi _{\mathcal {S}}(x) + x^{\ell (\gamma )} \Phi _{\mathcal {S}}(x) + \ldots + x^{\ell (\gamma _\kappa )} \Phi _{\mathcal {S}}(x) \\ &amp;= (1 + C(x)) \Phi _{\mathcal {S}}(x)  \end {align*}
</p><!-- l. 1810 --><p class='noindent'>So \(\Phi _{\mathcal {S}}(x) = \frac {x^n}{1+C(x)} \cdot \Phi _{\mathcal {R}}(x)\)
</p><!-- l. 1812 --><p class='noindent'>After this it is just algebraic manipulation to solve for \(\Phi _{\mathcal {R}}(x)\).
</p><!-- l. 1814 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1816 --><p class='noindent'>Let \(\kappa = 1010\)
</p><!-- l. 1818 --><p class='noindent'>\(\mathcal {R}\) - avoid \(\kappa \)
</p><!-- l. 1820 --><p class='noindent'>\(\mathcal {S}\) - \(\kappa \) occurs exactly once at the end
</p><!-- l. 1822 --><p class='noindent'>\(R \smile S = \epsilon \smile R0 \smile R1\)
</p><!-- l. 1824 --><p class='noindent'>What happens if we append \(\kappa \) to the end of a word in \(R\).
</p><!-- l. 1826 --><p class='noindent'>If the word in \(R\) ended with \(10\), then
</p><!-- l. 1828 --><p class='noindent'>\(r_1r_2 \ldots r_k 10 \kappa = r_1r_2 \ldots r_k 101010\)
</p><!-- l. 1830 --><p class='noindent'>This is in \(S10\).
</p><!-- l. 1832 --><p class='noindent'>In this case the \(10\) corresponds to a \(\gamma \in \mathcal {C}\) as \(10 \kappa = \kappa 10 = 101010\)
</p><!-- l. 1834 --><p class='noindent'>If the word does not end in \(10\), then we are fine, and
</p><!-- l. 1836 --><p class='noindent'>\(r_1r_2 \ldots r_n 1010 \in \mathcal {S}\)
</p><!-- l. 1838 --><p class='noindent'>Notice, the suffixes of \(\kappa = 1010\) are
</p><!-- l. 1840 --><p class='noindent'>\(010,10,0.\)
</p><!-- l. 1842 --><p class='noindent'>\(n \kappa \ne \kappa 0 = 10100\)
</p><!-- l. 1844 --><p class='noindent'>\(10 \kappa = \kappa 10 = 101010\)
</p><!-- l. 1846 --><p class='noindent'>\(n\kappa \ne \kappa 010 = 1010010\)
                                                                                      
                                                                                      
</p><!-- l. 1848 --><p class='noindent'>From here we get
</p><!-- l. 1850 --><p class='noindent'>\(R \kappa = S \smile S10\)
</p><!-- l. 1853 --><p class='noindent'>
</p>
<h3 class='sectionHead' id='recurrence-relations'><span class='titlemark'>4   </span> <a id='x1-190004'></a>Recurrence Relations</h3>
<!-- l. 1855 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='recurrences'><span class='titlemark'>4.1   </span> <a id='x1-200004.1'></a>Recurrences</h4>
<!-- l. 1857 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1859 --><p class='noindent'>Let \(g_0 = 1, g_1 = 1\) and \(g_n = 2g_{n-1} + g_{n-2} \forall n \ge 2\)
</p><!-- l. 1861 --><p class='noindent'><span class='underline'>Questions</span>
</p><!-- l. 1863 --><p class='noindent'>What can we say about \begin {align*}  \sum _{n=0}^{\infty } g_n x^n  \end {align*}
</p><!-- l. 1868 --><p class='noindent'>Can we find a closed form for it? What can we do with this closed form?
</p><!-- l. 1870 --><p class='noindent'>First, find a closed form for
</p><!-- l. 1886 --><p class='noindent'>\begin {align*}  G(x) &amp;= \sum _{n=0}^{\infty }g_nx^n \\ &amp;= 1 + x + \sum _{n=2}^{\infty } g_n x^n \\ &amp;= 1 + x + \sum _{n=2}^{\infty }(2 g_{n-1} x^n + g_{n-2})x^n \\ &amp;= 1 + x + \sum _{n=2}^{\infty }2g_{n-2}x^n + \sum _{n=2}^{\infty }g_{n-2}x^n \\ &amp;= 1 + x + \sum _{n=2}^{\infty }2g_{n-1}x^n + x^2 \sum _{n=0}^{\infty }g_nx^n \\ &amp;= 1 + x + \sum _{n=2}^{\infty }2g_{n-1}x^n + x^2 G(x) \\ &amp;= 1 + x + 2x \sum _{n=2}^{\infty }g_{n-1}x^{n-1} + x^2 G(x) \\ &amp;= 1 + x + 2x(-g_0x^0 + \sum _{n=1}^{\infty }g_{n-1}x^{n-1})+ x^2 G(x) \\ &amp;= 1 + x + 2x(-1 + G(x)) + x^2 G(x) \\ &amp;= 1 + x - 2x + 2xG(x) + x^2 G(x) \\ &amp;\implies G(x) = 1-x+2xG(x)+x^2G(x) \\ &amp;\implies G(x)(1-2x-x^2) = 1 - x \\ &amp;\implies G(x) = \frac {1-x}{1-2x-x^2}  \end {align*}
</p><!-- l. 1888 --><p class='noindent'>This is our desired closed form expression.
</p><!-- l. 1890 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1892 --><p class='noindent'>Let \(g_0 = g_1 = 1\), and \(g_n = 2g_{n-1} + g_{n-2} \forall n \ge 2\)
</p><!-- l. 1894 --><p class='noindent'>Last class we showed
</p><!-- l. 1898 --><p class='noindent'>\begin {align*}  G(x) = \sum _{n=0}^{\infty }g_nx^n = \frac {1-x}{1-2x-x^2}  \end {align*}
</p><!-- l. 1900 --><p class='noindent'>Consider \(1-2x-x^2\). I want to write this as \((1-\alpha x)(1 - \beta x)\) for reasons that will make sense later.
</p><!-- l. 1902 --><p class='noindent'>Find the roots of \(y^2 - 2y - 1\).
</p><!-- l. 1904 --><p class='noindent'>(This is \(y^2P(\frac {1}{y})\) where \(P(x) = 1 - 2x - x^2\))
</p><!-- l. 1906 --><p class='noindent'>By the quadratic formula, the roots of \(y^2 - 2y - 1\) are \(\frac {2 \pm \sqrt {4+4}}{2} = 1 \pm \sqrt {2}\).
</p><!-- l. 1908 --><p class='noindent'>This gives \(y^2 - 2y - 1 = (y - (1 + \sqrt {2}))(y-(1-\sqrt {2}))\).
</p><!-- l. 1910 --><p class='noindent'>Equiv: \(1-2x-x^2 = (1-(1+\sqrt {2})x)(1-(1-\sqrt {2})x)\)
</p><!-- l. 1912 --><p class='noindent'>This gives us
</p><!-- l. 1916 --><p class='noindent'>\begin {align*}  \frac {1-x}{1-2x-x^2} = \frac {1-x}{(1-(1+\sqrt {2})x)(1-(1-\sqrt {2})x)}  \end {align*}
</p><!-- l. 1918 --><p class='noindent'>We can now do a partial fraction decomposition (Math \(138\)).
</p><!-- l. 1920 --><p class='noindent'>That is, we can find an \(a\) &amp; \(b\) such that
</p><!-- l. 1924 --><p class='noindent'>\begin {align*}  \frac {1-x}{(1-(1+\sqrt {2})x)(1-(1-\sqrt {2})x)} = \frac {a}{(1-(1+\sqrt {2})x)} + \frac {b}{(1-(1-\sqrt {2})x)}  \end {align*}
</p><!-- l. 1926 --><p class='noindent'>Multiplying both sides by the denominator gives
</p><!-- l. 1928 --><p class='noindent'>\(1-x = a(1-(1-\sqrt {2})x) + b(1-(1+\sqrt {2})x)\)
</p><!-- l. 1930 --><p class='noindent'>With a bit of trial and error, we see \(a = \frac {1}{2}\) and \(b = \frac {1}{2}\).
</p><!-- l. 1932 --><p class='noindent'>This gives us,
</p><!-- l. 1939 --><p class='noindent'>\begin {align*}  G(x) = \sum _{n=0}^{\infty }g_nx^n = \frac {1-x}{1-2x-x^2} &amp;= \frac {\frac {1}{2}}{(1-(1+\sqrt {2})x)} + \frac {\frac {1}{2}}{(1-(1-\sqrt {2})x)} \\ &amp;= \frac {1}{2} \sum _{n=0}^{\infty }(1+\sqrt {2})^n x^n + \frac {1}{2} \sum _{n=0}^{\infty }(1-\sqrt {2})^n x^n \\ &amp;= \sum _{n=0}^{\infty } \frac {1}{2} ((1+\sqrt {2})^n + (1-\sqrt {2})^n)x^n \\ \text {This gives us } g_n &amp;= \frac {1}{2}((1+\sqrt {2})^n + (1-\sqrt {2})^n).  \end {align*}
                                                                                      
                                                                                      
</p><!-- l. 1941 --><p class='noindent'>We notice in this case that \(1-\sqrt {2} \approx -0.44\). This means that \((1-\sqrt {2})^n \to 0\) as \(n \to \infty \).
</p><!-- l. 1943 --><p class='noindent'>This means for large \(n\) that \begin {align*}  g_n \approx \frac {1}{2}(1+\sqrt {2})^n  \end {align*}
</p><!-- l. 1948 --><p class='noindent'>Further, as \(g_n\) are all integers, we see \(\frac {1}{2}(1+\sqrt {2})^n\) is very close to an integer for large \(n\).
</p><!-- l. 1950 --><p class='noindent'>
</p>
<h4 class='subsectionHead' id='homogeneous-linear-recurrence-relations'><span class='titlemark'>4.2   </span> <a id='x1-210004.2'></a>Homogeneous Linear Recurrence Relations</h4>
<!-- l. 1952 --><p class='noindent'>Let \(a_1, a_2, \ldots , a_d\) be a set of complex numbers (typically integers).
</p><!-- l. 1954 --><p class='noindent'>Let \(g_0, g_1, \ldots , g_m\) be a set of initial conditions. Here \(m \ge d-1\).
</p><!-- l. 1956 --><p class='noindent'>Then the sequence \(g_1, g_2, \ldots \) is a homogeneous linear recurrence relation if for all \(n \ge m+1\) we have \begin {align*}  g_n + a_1g_{n-1} + \ldots + a_d g_{n-d} = 0  \end {align*}
</p><!-- l. 1961 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1963 --><p class='noindent'>Our previous example is an example of such a relation. Here \(g_1 = g_0 = 1\), and
</p><!-- l. 1967 --><p class='noindent'>\begin {align*}  g_n - 2g_{n-1}-g_{n-2} = 0, \forall n \ge 2  \end {align*}
</p><!-- l. 1969 --><p class='noindent'>Here \(a_1 = -2, a_2 = -1\). In the previous example, we had
</p><!-- l. 1973 --><p class='noindent'>\begin {align*}  G(x) = \sum _{n=0}^{\infty }g_n x^n = \frac {P(x)}{(1+a_1x+a_2x^2)} \text {for some polynomial } P(x)  \end {align*}
</p><!-- l. 1975 --><p class='noindent'><span class='underline'>Theorem</span>
</p><!-- l. 1977 --><p class='noindent'>Let \(g_n + a_1 g_{n-1} + \ldots + a_dg_{n-d} = 0\) be the recurrence relation. Then
</p><!-- l. 1981 --><p class='noindent'>\begin {align*}  G(x) = \frac {b_mx^m + \ldots b_0}{1 + a_1x+a_2x^2 + \ldots + a_dx^d}  \end {align*}
</p><!-- l. 1983 --><p class='noindent'>where \(b_k = g_k + a_1g_{k-1} + \ldots + a_dg_{k-d}\)
</p><!-- l. 1985 --><p class='noindent'>where \(g_n = 0\) if \(n &lt; 0\).
</p><!-- l. 1987 --><p class='noindent'><span class='underline'>Example</span>
</p><!-- l. 1989 --><p class='noindent'>Let
</p><!-- l. 1993 --><p class='noindent'>\begin {align*}  G(x) = \sum _{n=0}^{\infty }g_nx^n = \frac {2x^2-4x+3}{(1-2x)^2(1+x)}  \end {align*}
</p><!-- l. 1995 --><p class='noindent'>
     </p><ol class='enumerate1'>
<li class='enumerate' id='x1-21002x1'>Find a closed form for \(g_n\)
     </li>
<li class='enumerate' id='x1-21004x2'>Find initial conditions
     </li>
<li class='enumerate' id='x1-21006x3'>Find recurrence relations</li></ol>
<!-- l. 2001 --><p class='noindent'>We know from partial fraction decomposition that there exists \(a,b,\) and \(c\) such that
</p><!-- l. 2005 --><p class='noindent'>\begin {align*}  \frac {2x^2-4x+3}{(1-2x)^2(1+x)} = \frac {a}{(1-2x)} + \frac {b}{(1-2x)^2} + \frac {c}{(1+x)}  \end {align*}
</p><!-- l. 2007 --><p class='noindent'>Multiply by denominator \begin {align*}  2x^2 - 4x + 3 = a(1-2x)(1+x) + b(1+x) + c(1-2x)^2  \end {align*}
</p><!-- l. 2012 --><p class='noindent'>Evaluate at \(x=-1\) gives, \(c=1\)
</p><!-- l. 2014 --><p class='noindent'>Evaluate at \(x= \frac {1}{2}\) gives \(b = 1\).
                                                                                      
                                                                                      
</p><!-- l. 2016 --><p class='noindent'>Knowing \(c=1\) and \(b=1\) we can simplify and get \(a=1\).
</p><!-- l. 2018 --><p class='noindent'>Hence
</p><!-- l. 2022 --><p class='noindent'>\begin {align*}  \frac {2x^2-4x+3}{(1-2x)^2(1+x)} = \frac {1}{1-2x} + \frac {1}{(1-2x)^2} + \frac {1}{1+x}  \end {align*}
</p><!-- l. 2024 --><p class='noindent'>This gives
</p><!-- l. 2031 --><p class='noindent'>\begin {align*}  G(x) &amp;= \sum _{n=0}^{\infty }2^nx^n + \frac {1}{(1-2x)^2} + \sum _{n=0}^{\infty }(-1)^nx^n \\ &amp;= \sum _{n=0}^{\infty }2^nx^n + \sum _{n=0}^{\infty }\binom {n+1}{1}2^nx^n + \sum _{n=0}^{\infty }(-1)^nx^n \\ &amp;= \sum _{n=0}^{\infty }(2^n = (n+1)2^n + (-1)^n)x^n \\ &amp;= \sum _{n=0}^{\infty }(2 \cdot 2^n + n2^n + (-1)^n)x^n  \end {align*}
</p><!-- l. 2033 --><p class='noindent'>Hence \begin {align*}  &amp;g_0 = 2 \cdot 2^0 + 0 \cdot 2^0 + (-1)^0 = 3 \\ &amp;g_1 = 2 \cdot 2^1 + 1 \cdot 2^1 + (-1)^1 = 5 \\ &amp;g_2 = 17  \end {align*}
</p><!-- l. 2040 --><p class='noindent'>Notice \begin {align*}  &amp;(1-2x)^2(1+x) \\ &amp;= (1-4x+4x^2)(1+x) \\ &amp;= (1-3x + 0 + 4x^3) \\ &amp;\implies g_n = 3g_{n-1} + 0 g_{n-2} + 4g{n-3} \\ &amp;\implies g_n = 3g_{n-1} - 4g_{n-3}  \end {align*}
</p><!-- l. 2049 --><p class='noindent'>Linear Homogeneous Recurrence Equations
</p><!-- l. 2051 --><p class='noindent'><span class='underline'>Version 1</span>
</p><!-- l. 2053 --><p class='noindent'>Initial conditions \(g_0, g_1, \ldots , g_{d-1}\)
</p><!-- l. 2055 --><p class='noindent'>Recurrence Equation \(g_n + a_1g_{n-1}+\ldots +a_dg_{n-d}=0, \forall n \ge d\)
</p><!-- l. 2057 --><p class='noindent'><span class='underline'>Version 2</span>
</p><!-- l. 2061 --><p class='noindent'>\begin {align*}  G(x) = \sum _{n=0}^{\infty }g_nx^n = \frac {P(x)}{Q(x)}  \end {align*}
</p><!-- l. 2063 --><p class='noindent'>Here, \(Q(x) = 1 + a_1x^1 + a_2x^2 + \ldots a_dx^d\)
</p><!-- l. 2066 --><p class='noindent'><span class='underline'>Version 3</span>
</p><!-- l. 2068 --><p class='noindent'>Assume
</p><!-- l. 2072 --><p class='noindent'>\begin {align*}  Q(x) = (1-\lambda _1x)^{\alpha _1}(1-\lambda _2x)^{\alpha _2}\ldots (1-\lambda _kx)^{\alpha _k}  \end {align*}
</p><!-- l. 2074 --><p class='noindent'>Then there exists polynomials \(P_1(x), P_2(x), \ldots , P_k(x)\) with \(deg P_i(x) \le \alpha _i - 1\) such that
</p><!-- l. 2078 --><p class='noindent'>\begin {align*}  g_n = P_1(n)\lambda _1^n + P_2(n)\lambda _2^n + \ldots + P_k(n)\lambda _k^n  \end {align*}
</p>
 
</body> 
</html>
